<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Times and dates | programming-25</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Times and dates" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="https://gapps123.github.io/programming-25/programming-25/data/part-7/3-times-and-dates.html" />
<meta property="og:url" content="https://gapps123.github.io/programming-25/programming-25/data/part-7/3-times-and-dates.html" />
<meta property="og:site_name" content="programming-25" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Times and dates" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","headline":"Times and dates","url":"https://gapps123.github.io/programming-25/programming-25/data/part-7/3-times-and-dates.html"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/programming-25/assets/css/style.css?v=8fdccb165fdb68b261d29b53eab9f8c397ee01cf">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/programming-25/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="https://gapps123.github.io/programming-25/programming-25/">programming-25</a></h1>
      

      <text-box variant="learningObjectives" name="Learning objectives">

After this section

- You will know how to handle dates and times in Python code
- You will be able to create and use `datetime` objects
- You will know how to compare and calculate differences between two dates or times

</text-box>

<h2 id="the-datetime-object">The datetime object</h2>

<p>The Python <a href="https://docs.python.org/3/library/datetime.html?highlight=datetime#datetime.datetime">datetime</a> module includes the function <a href="https://docs.python.org/3/library/datetime.html?highlight=datetime#datetime.datetime.now">now</a>, which returns a datetime object containing the current date and time. The default printout of a datetime object looks like this:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="n">my_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">my_time</span><span class="p">)</span>
</code></pre></div></div>

<sample-output>

2021-10-19 08:46:49.311393

</sample-output>

<p>You can also define the object yourself:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="n">my_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">1952</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">24</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">my_time</span><span class="p">)</span>
</code></pre></div></div>

<sample-output>

1952-12-24 00:00:00

</sample-output>

<p>By default, the time is set to midnight, as we did not give a time of day in the example above.</p>

<p>Different elements of the datetime object can be accessed in the following manner:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="n">my_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">1952</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">24</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Day:"</span><span class="p">,</span> <span class="n">my_time</span><span class="p">.</span><span class="n">day</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Month:"</span><span class="p">,</span> <span class="n">my_time</span><span class="p">.</span><span class="n">month</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Year:"</span><span class="p">,</span> <span class="n">my_time</span><span class="p">.</span><span class="n">year</span><span class="p">)</span>
</code></pre></div></div>

<sample-output>

Day: 24
Month: 12
Year: 1952

</sample-output>

<p>A time of day can also be specified. The precision can vary, as you can see below:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="n">pv1</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">13</span><span class="p">)</span>     <span class="c1"># 30.6.2021 at 1PM
</span><span class="n">pv2</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">45</span><span class="p">)</span> <span class="c1"># 30.6.2021 at 6.45PM
</span></code></pre></div></div>

<h2 id="compare-times-and-calculate-differences-between-them">Compare times and calculate differences between them</h2>

<p>The familiar comparison operators work also on datetime objects:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="n">time_now</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">()</span>
<span class="n">midsummer</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">26</span><span class="p">)</span>

<span class="k">if</span> <span class="n">time_now</span> <span class="o">&lt;</span> <span class="n">midsummer</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"It is not yet Midsummer"</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">time_now</span> <span class="o">==</span> <span class="n">midsummer</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Happy Midsummer!"</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">time_now</span> <span class="o">&gt;</span> <span class="n">midsummer</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"It is past Midsummer"</span><span class="p">)</span>
</code></pre></div></div>

<sample-output>

It is past Midsummer

</sample-output>

<p>The difference between two datetime objects can be calculated simply with the subtraction operator:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="n">time_now</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">()</span>
<span class="n">midsummer</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">26</span><span class="p">)</span>

<span class="n">difference</span> <span class="o">=</span> <span class="n">midsummer</span> <span class="o">-</span> <span class="n">time_now</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Midsummer is"</span><span class="p">,</span> <span class="n">difference</span><span class="p">.</span><span class="n">days</span><span class="p">,</span> <span class="s">"days away"</span><span class="p">)</span>
</code></pre></div></div>

<sample-output>

Midsummer is -116 days away

</sample-output>

<p>NB: the result of the datetime subtraction is a <a href="https://docs.python.org/3/library/datetime.html?highlight=datetime#timedelta-objects">timedelta</a> object. It is less versatile than the <code class="language-plaintext highlighter-rouge">datetime</code> object. For instance, you can access the number of days in a <code class="language-plaintext highlighter-rouge">timedelta</code> object, but not the number of years, as the length of a year varies. A <code class="language-plaintext highlighter-rouge">timedelta</code> object contains the attributes <code class="language-plaintext highlighter-rouge">days</code>, <code class="language-plaintext highlighter-rouge">seconds</code> and <code class="language-plaintext highlighter-rouge">microseconds</code>. Other measures can be passed as arguments, but they will be converted internally.</p>

<p>Similarly, addition is available between <code class="language-plaintext highlighter-rouge">datetime</code> and <code class="language-plaintext highlighter-rouge">timedelta</code> objects. The result will be the <code class="language-plaintext highlighter-rouge">datetime</code> produced when the specified number of days (or weeks, seconds, etc) is added to a <code class="language-plaintext highlighter-rouge">datetime</code> object:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>
<span class="n">midsummer</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">26</span><span class="p">)</span>

<span class="n">one_week</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
<span class="n">week_from_date</span> <span class="o">=</span> <span class="n">midsummer</span> <span class="o">+</span> <span class="n">one_week</span>

<span class="k">print</span><span class="p">(</span><span class="s">"A week after Midsummer it will be"</span><span class="p">,</span> <span class="n">week_from_date</span><span class="p">)</span>

<span class="n">long_time</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">weeks</span><span class="o">=</span><span class="mi">32</span><span class="p">,</span> <span class="n">days</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s">"32 weeks and 15 days after Midsummer it will be"</span><span class="p">,</span> <span class="n">midsummer</span> <span class="o">+</span> <span class="n">long_time</span><span class="p">)</span>
</code></pre></div></div>

<sample-output>

A week after Midsummer it will be 2021-07-03 00:00:00
32 weeks and 15 days after Midsummer it will be 2022-02-20 00:00:00

</sample-output>

<p>Let’s see how a higher precision works:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">time_now</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">()</span>
<span class="n">midnight</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
<span class="n">difference</span> <span class="o">=</span> <span class="n">midnight</span> <span class="o">-</span> <span class="n">time_now</span>
<span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Midnight is still </span><span class="si">{</span><span class="n">difference</span><span class="p">.</span><span class="n">seconds</span><span class="si">}</span><span class="s"> seconds away"</span><span class="p">)</span>
</code></pre></div></div>

<sample-output>

Midnight is still 8188 seconds away

</sample-output>

<programming-exercise name="How old" tmcname="part07-09_how_old">

Please write a program which asks the user for their date of birth, and then prints out how old the user was on the eve of the new millennium. The program should ask for the day, month and year separately, and print out the age in days. Please have a look at the examples below:

<sample-output>

Day: **10**
Month: **9**
Year: **1979**
You were 7417 days old on the eve of the new millennium.

</sample-output>

<sample-output>

Day: **28**
Month: **3**
Year: **2005**
You weren't born yet on the eve of the new millennium.

</sample-output>

You may assume all day-month-year combinations given as an argument will be valid dates. That is, there will not be a date like February 31st. 

</programming-exercise>

<programming-exercise name="Valid PIC?" tmcname="part07-10_valid_pic">

In this exercise you will validate Finnish Personal Identity Codes (PIC). 

Please write a function named `is_it_valid(pic: str)`, which returns `True` or `False` based on whether the PIC given as an argument is valid or not. Finnish PICs follow the format `ddmmyyXyyyz`, where `ddmmyy` contains the date of birth, `X` is the marker for century, `yyy` is the personal identifier and `z` is a control character.

The program should check the validity by these three criteria:

* The first half of the code is a valid, existing date in the format `ddmmyy`.
* The century marker is either `+` (1800s), `-` (1900s) or `A` (2000s).
* The control character is valid.

The control character is calculated by taking the nine-digit number created by the date of birth and the personal identifier, dividing this by 31, and selecting the character at the index specified by the remainder from the string `0123456789ABCDEFHJKLMNPRSTUVWXY`. For example, if the remainder was 12, the control character would be `C`.

More examples and explanations of the uses of the PIC are available at the [Digital and Population Data Services Agency](https://dvv.fi/en/personal-identity-code).

**NB!** Please make sure you do not share your own PIC, for example in the code you use for testing or through the course support channels.

Here are some valid PICs you can use for testing:

* 230827-906F
* 120488+246L
* 310823A9877

</programming-exercise>

<h2 id="formatting-times-and-dates">Formatting times and dates</h2>

<p>The <code class="language-plaintext highlighter-rouge">datetime</code> module contains a handy method <a href="https://docs.python.org/3/library/datetime.html?highlight=datetime#datetime.date.strftime">strftime</a> for formatting the string representation of a datetime object. For example, the following code will print the current date in the format <code class="language-plaintext highlighter-rouge">dd.mm.yyyy</code>, and then the date and time in a different format:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="n">my_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">my_time</span><span class="p">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">"%d.%m.%Y"</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">my_time</span><span class="p">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">"%d/%m/%Y %H:%M"</span><span class="p">))</span>
</code></pre></div></div>

<sample-output>

19.10.2021
19/10/2021 09:31

</sample-output>

<p>Time formatting uses specific characters to signify specific formats. The following is a list of a few of them (please see the Python <a href="https://docs.python.org/3/library/time.html#time.strftime">documentation</a> for a complete list):</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Notation</th>
      <th style="text-align: left">Significance</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">%d</code></td>
      <td style="text-align: left">day (01–31)</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">%m</code></td>
      <td style="text-align: left">month (01–12)</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">%Y</code></td>
      <td style="text-align: left">year in 4 digit format</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">%H</code></td>
      <td style="text-align: left">hours in 24 hour format</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">%M</code></td>
      <td style="text-align: left">minutes (00–59)</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">%S</code></td>
      <td style="text-align: left">seconds (00–59)</td>
    </tr>
  </tbody>
</table>

<p>You can also specify the delimiter between the different elements, as seen in the examples above.</p>

<p>Datetime formatting works in the reverse direction as well, in case you need to parse a datetime object from a string given by the user. The method <a href="https://docs.python.org/3/library/datetime.html?highlight=datetime#datetime.datetime.strptime">strptime</a> will do just that:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="n">birthday</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"Please type in your birthday in the format dd.mm.yyyy: "</span><span class="p">)</span>
<span class="n">my_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">birthday</span><span class="p">,</span> <span class="s">"%d.%m.%Y"</span><span class="p">)</span>

<span class="k">if</span> <span class="n">my_time</span> <span class="o">&lt;</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"You were born in the previous millennium"</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"You were born during this millennium"</span><span class="p">)</span>
</code></pre></div></div>

<sample-output>

Please type in your birthday in the format dd.mm.yyyy: **5.11.1986**
You were born in the previous millennium

</sample-output>

<programming-exercise name="Screen time" tmcname="part07-11_screen_time">

Please write a program for recording the amount of time the user has spent in front of a television, computer or mobile device screen over a specific period of time. 

The program should work as follows:

<sample-output>

Filename: **late_june.txt**
Starting date: **24.6.2020**
How many days: **5**
Please type in screen time in minutes on each day (TV computer mobile):
Screen time 24.06.2020: **60 120 0**
Screen time 25.06.2020: **0 0 0**
Screen time 26.06.2020: **180 0 0**
Screen time 27.06.2020: **25 240 15**
Screen time 28.06.2020: **45 90 5**
Data stored in file late_june.txt

</sample-output>

The user will input each day on a separate line, and the entries will contain three numbers separated by spaces, representing minutes.

With the above input, the program should store the data in a file named `late_june.txt`. The contents should look like this:

<sample-data>

Time period: 24.06.2020-28.06.2020
Total minutes: 780
Average minutes: 156.0
24.06.2020: 60/120/0
25.06.2020: 0/0/0
26.06.2020: 180/0/0
27.06.2020: 25/240/15
28.06.2020: 45/90/5

</sample-data>

</programming-exercise>

<!---
<quiz id="6fff0633-2f18-5e2b-9eab-6c8950c8378b"></quiz>
-->


      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
