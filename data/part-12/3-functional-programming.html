<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Functional programming | programming-25</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Functional programming" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="https://gapps123.github.io/programming-25/programming-25/data/part-12/3-functional-programming.html" />
<meta property="og:url" content="https://gapps123.github.io/programming-25/programming-25/data/part-12/3-functional-programming.html" />
<meta property="og:site_name" content="programming-25" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Functional programming" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","headline":"Functional programming","url":"https://gapps123.github.io/programming-25/programming-25/data/part-12/3-functional-programming.html"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/programming-25/assets/css/style.css?v=8fdccb165fdb68b261d29b53eab9f8c397ee01cf">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/programming-25/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="https://gapps123.github.io/programming-25/programming-25/">programming-25</a></h1>
      

      <text-box variant="learningObjectives" name="Learning objectives">

After this section

- You will know what functional programming means
- You will be able to make use of the functions `map`, `reduce` and `filter` in your own programs

</text-box>

<p>Functional programming refers to a <em>programming paradigm</em> which avoids changes in program state as much as possible. Variables are generally avoided. Instead, chains of function calls form the backbone of the program.</p>

<p>Lambda expressions and different types of comprehensions are common techniques in the functional programming style, as they let you process data without storing it in variables, so that the state of the program does not change. For example, a lambda expression is for all intents and purposes a function, but we do not need to store a named reference to it anywhere.</p>

<p>As mentioned above, functional programming is a programming paradigm, or a style of programming. There are many different programming paradigms, and we’ve already come across some of them:</p>

<ul>
  <li>imperative programming, where the program consists of a sequence of commands which is executed in order</li>
  <li>procedural programming, where the program is grouped into procedures or sub-programs</li>
  <li>object-oriented programming, where the program and its state is stored in objects defined in classes.</li>
</ul>

<p>There are differing opinions on the divisions between the different paradigms; for example, some maintain that imperative and procedural programming mean the same thing, while others place imperative programming as an umbrella term which covers both procedural and object-oriented programming. Th terminology and divisions are not that important, and neither is strictly sticking to one or the other paradigm, but it is important to understand that such different approaches exist, as they affect the choices programmers make.</p>

<p>Many programming languages are designed with one or the other programming paradigm in mind, but Python is a rather versatile programming language, and allows for following several different programming paradigms, even within a single program. This lets us choose the most efficient and clear method for solving each problem.</p>

<p>Let’s have a look at some functional programming tools provided by Python.</p>

<h2 id="map">map</h2>

<p>The <code class="language-plaintext highlighter-rouge">map</code> function executes some operation on each item in an iterable series. This sounds a lot like the effect a comprehension has, but the syntax is different.</p>

<p>Let’s assume we have list of strings which we want to convert into a list of integers:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">str_list</span> <span class="o">=</span> <span class="p">[</span><span class="s">"123"</span><span class="p">,</span><span class="s">"-10"</span><span class="p">,</span> <span class="s">"23"</span><span class="p">,</span> <span class="s">"98"</span><span class="p">,</span> <span class="s">"0"</span><span class="p">,</span> <span class="s">"-110"</span><span class="p">]</span>

<span class="n">integers</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">str_list</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">integers</span><span class="p">)</span> <span class="c1"># this tells us the type of object we're dealing with
</span>
<span class="k">for</span> <span class="n">number</span> <span class="ow">in</span> <span class="n">integers</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
</code></pre></div></div>

<sample-output>

&lt;map object at 0x0000021A4BFA9A90&gt;
123
-10
23
98
0
-110

</sample-output>

<p>The general syntax for the <code class="language-plaintext highlighter-rouge">map</code> function is</p>

<p><code class="language-plaintext highlighter-rouge">map(&lt;function&gt;, &lt;series&gt;)</code></p>

<p>where <code class="language-plaintext highlighter-rouge">function</code> is the operation we want to execute on each item in the <code class="language-plaintext highlighter-rouge">series</code>.</p>

<p>The <code class="language-plaintext highlighter-rouge">map</code> function returns an object of type <code class="language-plaintext highlighter-rouge">map</code>, which is iterable, and can be converted into a list:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">capitalize</span><span class="p">(</span><span class="n">my_string</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="n">first</span> <span class="o">=</span> <span class="n">my_string</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">first</span> <span class="o">=</span> <span class="n">first</span><span class="p">.</span><span class="n">upper</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">first</span> <span class="o">+</span> <span class="n">my_string</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>

<span class="n">test_list</span> <span class="o">=</span> <span class="p">[</span><span class="s">"first"</span><span class="p">,</span> <span class="s">"second"</span><span class="p">,</span> <span class="s">"third"</span><span class="p">,</span> <span class="s">"fourth"</span><span class="p">]</span>

<span class="n">capitalized</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">capitalize</span><span class="p">,</span> <span class="n">test_list</span><span class="p">)</span>

<span class="n">capitalized_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">capitalized</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">capitalized_list</span><span class="p">)</span>
</code></pre></div></div>

<sample-output>

['First', 'Second', 'Third', 'Fourth']

</sample-output>

<p>As you can see from the examples above, the <code class="language-plaintext highlighter-rouge">map</code> function accepts both an anonymous lambda function and a named function defined with the <code class="language-plaintext highlighter-rouge">def</code> keyword.</p>

<p>We could achieve the same result with a list comprehension:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">capitalize</span><span class="p">(</span><span class="n">my_string</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="n">first</span> <span class="o">=</span> <span class="n">my_string</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">first</span> <span class="o">=</span> <span class="n">first</span><span class="p">.</span><span class="n">upper</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">first</span> <span class="o">+</span> <span class="n">my_string</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>

<span class="n">test_list</span> <span class="o">=</span> <span class="p">[</span><span class="s">"first"</span><span class="p">,</span> <span class="s">"second"</span><span class="p">,</span> <span class="s">"third"</span><span class="p">,</span> <span class="s">"fourth"</span><span class="p">]</span>

<span class="n">capitalized_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">capitalize</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">test_list</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">capitalized_list</span><span class="p">)</span>
</code></pre></div></div>

<p>…or we could go through the original list with a <code class="language-plaintext highlighter-rouge">for</code> loop and save the processed items in a new list with the <code class="language-plaintext highlighter-rouge">append</code> method. Typically, in programming there are many different solutions to each problem. There are rarely any absolutely right or wrong answers. Knowing many different approaches helps you choose the most appropriate one for each situation, or one that best suits your own tastes.</p>

<p>It is worth pointing out that the <code class="language-plaintext highlighter-rouge">map</code> function does not return a list, but an <em>iterator</em> object of type map. An iterator behaves in many ways like a list, but there are exceptions, as can be seen in the following example:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">capitalize</span><span class="p">(</span><span class="n">my_string</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="n">first</span> <span class="o">=</span> <span class="n">my_string</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">first</span> <span class="o">=</span> <span class="n">first</span><span class="p">.</span><span class="n">upper</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">first</span> <span class="o">+</span> <span class="n">my_string</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>

<span class="n">test_list</span> <span class="o">=</span> <span class="p">[</span><span class="s">"first"</span><span class="p">,</span> <span class="s">"second"</span><span class="p">,</span> <span class="s">"third"</span><span class="p">,</span> <span class="s">"fourth"</span><span class="p">]</span>

<span class="c1"># store the return value from the map function
</span><span class="n">capitalized</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">capitalize</span><span class="p">,</span> <span class="n">test_list</span><span class="p">)</span>

<span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">capitalized</span><span class="p">:</span>
  <span class="k">print</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s">"print the same again:"</span><span class="p">)</span>
<span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">capitalized</span><span class="p">:</span>
  <span class="k">print</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
</code></pre></div></div>

<p>This would print out the following:</p>

<sample-output>

First
Second
Third
Fourth
print the same again:

</sample-output>

<p>Above we tried to print out the contents of the <code class="language-plaintext highlighter-rouge">map</code> iterator twice, but the second attempt produced no printout. The reason is that <code class="language-plaintext highlighter-rouge">map</code> is an iterator; passing through it with a <code class="language-plaintext highlighter-rouge">for</code> loop “depletes” it, much like a generator is depleted once its maximum value is reached. Once the items in the iterator have been traversed with a <code class="language-plaintext highlighter-rouge">for</code> loop, there is nothing left to go through.</p>

<p>If you need to go through the contents of a <code class="language-plaintext highlighter-rouge">map</code> iterator more than once, you could, for example, convert the map into a list:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">test_list</span> <span class="o">=</span> <span class="p">[</span><span class="s">"first"</span><span class="p">,</span> <span class="s">"second"</span><span class="p">,</span> <span class="s">"third"</span><span class="p">,</span> <span class="s">"fourth"</span><span class="p">]</span>

<span class="c1"># convert the return value of the map function into a list
</span><span class="n">capitalized</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">capitalize</span><span class="p">,</span> <span class="n">test_list</span><span class="p">))</span>

<span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">capitalized</span><span class="p">:</span>
  <span class="k">print</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s">"print the same again:"</span><span class="p">)</span>
<span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">capitalized</span><span class="p">:</span>
  <span class="k">print</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
</code></pre></div></div>

<sample-output>

First
Second
Third
Fourth
print the same again:
First
Second
Third
Fourth

</sample-output>

<h2 id="the-map-function-and-your-own-classes">The map function and your own classes</h2>

<p>You can naturally also process instances of your own classes with the <code class="language-plaintext highlighter-rouge">map</code> function. There are no special gimmicks involved, as you can see in the example below:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">BankAccount</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">account_number</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">balance</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">__account_number</span> <span class="o">=</span> <span class="n">account_number</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">__balance</span> <span class="o">=</span> <span class="n">balance</span>

    <span class="k">def</span> <span class="nf">deposit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">amount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">__balance</span> <span class="o">+=</span> <span class="n">amount</span>

    <span class="k">def</span> <span class="nf">get_balance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">__balance</span>

<span class="n">a1</span> <span class="o">=</span> <span class="n">BankAccount</span><span class="p">(</span><span class="s">"123456"</span><span class="p">,</span> <span class="s">"Randy Riches"</span><span class="p">,</span> <span class="mi">5000</span><span class="p">)</span>
<span class="n">a2</span> <span class="o">=</span> <span class="n">BankAccount</span><span class="p">(</span><span class="s">"12321"</span><span class="p">,</span> <span class="s">"Paul Pauper"</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">a3</span> <span class="o">=</span> <span class="n">BankAccount</span><span class="p">(</span><span class="s">"223344"</span><span class="p">,</span> <span class="s">"Mary Millionaire "</span><span class="p">,</span> <span class="mi">1000000</span><span class="p">)</span>

<span class="n">accounts</span> <span class="o">=</span> <span class="p">[</span><span class="n">a1</span><span class="p">,</span> <span class="n">a2</span><span class="p">,</span> <span class="n">a3</span><span class="p">]</span>

<span class="n">clients</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="n">t</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="n">accounts</span><span class="p">)</span>
<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">clients</span><span class="p">:</span>
  <span class="k">print</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

<span class="n">balances</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="n">t</span><span class="p">.</span><span class="n">get_balance</span><span class="p">(),</span> <span class="n">accounts</span><span class="p">)</span>
<span class="k">for</span> <span class="n">balance</span> <span class="ow">in</span> <span class="n">balances</span><span class="p">:</span>
  <span class="k">print</span><span class="p">(</span><span class="n">balance</span><span class="p">)</span>
</code></pre></div></div>

<sample-output>

Randy Riches
Paul Pauper
Mary Millionaire
5000
1
1000000

</sample-output>

<p>Here we first collect the names of the account holders with the <code class="language-plaintext highlighter-rouge">map</code> function. An anonymous lambda function is used to retrieve the value of the <code class="language-plaintext highlighter-rouge">name</code> attribute from each BankAccount object:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">clients</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="n">t</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="n">accounts</span><span class="p">)</span>
</code></pre></div></div>

<p>Similarly, the balance of each BankAccount is collected. The lambda function looks a bit different, because the balance is retrieved with a method call, not from the attribute directly:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">balances</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="n">t</span><span class="p">.</span><span class="n">get_balance</span><span class="p">(),</span> <span class="n">accounts</span><span class="p">)</span>
</code></pre></div></div>

<programming-exercise name="Attempted courses" tmcname="part12-11_attempted_courses">

The exercise template contains the class definition for a `CourseAttempt`. It works like this:

```python
attempt = CourseAttempt("Peter Python", "Introduction to Programming", 5)
print(attempt.student_name)
print(attempt.course_name)
print(attempt.grade)
print(attempt)
```

<sample-output>

Peter Python
Introduction to Programming
5
Peter Python, grade for the course Introduction to Programming 5

</sample-output>

## Names of students

Please write a function named `names_of_students(attempts: list)` which takes a list of CourseAttempt objects as its argument. The function should return a new list with the names of the students who have attempted the course.

```python
s1 = CourseAttempt("Peter Python", "Introduction to Programming", 3)
s2 = CourseAttempt("Olivia C. Objective", "Introduction to Programming", 5)
s3 = CourseAttempt("Peter Python", "Advanced Course in Programming", 2)

for name in names_of_students([s1, s2, s3]):
    print(name)
```

<sample-output>

Peter Python
Olivia C. Objective
Peter Python

</sample-output>

Please implement the function using the `map` function.

## Courses

Please write a function named `course_names(attempts: list)` which takes a list of CourseAttempt objects as its argument. The function should return a new list containing the names of the courses on the original list in alphabetical order. Each course name should appear only once on the list.

```python
s1 = CourseAttempt("Peter Python", "Introduction to Programming", 3)
s2 = CourseAttempt("Olivia C. Objective", "Introduction to Programming", 5)
s3 = CourseAttempt("Peter Python", "Advanced Course in Programming", 2)

for name in course_names([s1, s2, s3]):
    print(name)
```
<sample-output>

Advanced Course in Programming
Introduction to Programming

</sample-output>

Please implement the function using the `map` function. That alone will likely not be enough, however. You will need something else, too, to make sure the course names are unique.

</programming-exercise>

<h2 id="filter">filter</h2>

<p>The built-in Python function <code class="language-plaintext highlighter-rouge">filter</code> is similar to the <code class="language-plaintext highlighter-rouge">map</code> function, but, as the name implies, it doesn’t take all the items from the source. Instead, it filters them with a criterion function, which is passed as an argument. If the criterion function returns <code class="language-plaintext highlighter-rouge">True</code>, the item is selected.</p>

<p>Let’s look at an example using <code class="language-plaintext highlighter-rouge">filter</code>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">integers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">]</span>

<span class="n">even_numbers</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">number</span><span class="p">:</span> <span class="n">number</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="n">integers</span><span class="p">)</span>

<span class="k">for</span> <span class="n">number</span> <span class="ow">in</span> <span class="n">even_numbers</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
</code></pre></div></div>

<sample-output>

2
6
4
10
14

</sample-output>

<p>It might make the above example a bit clearer if we used a named function instead:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">is_it_even</span><span class="p">(</span><span class="n">number</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">number</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">False</span>

<span class="n">integers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">]</span>

<span class="n">even_numbers</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="n">is_it_even</span><span class="p">,</span> <span class="n">integers</span><span class="p">)</span>

<span class="k">for</span> <span class="n">number</span> <span class="ow">in</span> <span class="n">even_numbers</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
</code></pre></div></div>

<p>These two programs are functionally completely identical. It is mostly a matter of opinion which you consider the better approach.</p>

<p>Let’s have a look at another filtering example. This program models fishes, and selects only those which weigh at least 1000 grams:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Fish</span><span class="p">:</span>
    <span class="s">""" The class models a fish of a certain species and weight """</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">species</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">weight</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">species</span> <span class="o">=</span> <span class="n">species</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">weight</span> <span class="o">=</span> <span class="n">weight</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">species</span><span class="si">}</span><span class="s"> (</span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">weight</span><span class="si">}</span><span class="s"> g.)"</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">f1</span> <span class="o">=</span> <span class="n">Fish</span><span class="p">(</span><span class="s">"Pike"</span><span class="p">,</span> <span class="mi">1870</span><span class="p">)</span>
    <span class="n">f2</span> <span class="o">=</span> <span class="n">Fish</span><span class="p">(</span><span class="s">"Perch"</span><span class="p">,</span> <span class="mi">763</span><span class="p">)</span>
    <span class="n">f3</span> <span class="o">=</span> <span class="n">Fish</span><span class="p">(</span><span class="s">"Pike"</span><span class="p">,</span> <span class="mi">3410</span><span class="p">)</span>
    <span class="n">f4</span> <span class="o">=</span> <span class="n">Fish</span><span class="p">(</span><span class="s">"Cod"</span><span class="p">,</span> <span class="mi">2449</span><span class="p">)</span>
    <span class="n">f5</span> <span class="o">=</span> <span class="n">Fish</span><span class="p">(</span><span class="s">"Roach"</span><span class="p">,</span> <span class="mi">210</span><span class="p">)</span>

    <span class="n">fishes</span> <span class="o">=</span> <span class="p">[</span><span class="n">f1</span><span class="p">,</span> <span class="n">f2</span><span class="p">,</span> <span class="n">f3</span><span class="p">,</span> <span class="n">f4</span><span class="p">,</span> <span class="n">f5</span><span class="p">]</span>

    <span class="n">over_a_kilo</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">fish</span> <span class="p">:</span> <span class="n">fish</span><span class="p">.</span><span class="n">weight</span> <span class="o">&gt;=</span> <span class="mi">1000</span><span class="p">,</span> <span class="n">fishes</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">fish</span> <span class="ow">in</span> <span class="n">over_a_kilo</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">fish</span><span class="p">)</span>
</code></pre></div></div>

<sample-output>

Pike (1870 g.)
Pike (3410 g.)
Cod (2449 g.)

</sample-output>

<p>We could just as well use a list comprehension and achieve the same result:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">over_a_kilo</span> <span class="o">=</span> <span class="p">[</span><span class="n">fish</span> <span class="k">for</span> <span class="n">fish</span> <span class="ow">in</span> <span class="n">fishes</span> <span class="k">if</span> <span class="n">fish</span><span class="p">.</span><span class="n">weight</span> <span class="o">&gt;=</span> <span class="mi">1000</span><span class="p">]</span>
</code></pre></div></div>

<h2 id="the-return-value-of-filter-is-an-iterator">The return value of filter is an iterator</h2>

<p>The <code class="language-plaintext highlighter-rouge">filter</code> function resembles the <code class="language-plaintext highlighter-rouge">map</code> function in also that it returns an <em>iterator</em>. There are situations where you should be especially careful with <code class="language-plaintext highlighter-rouge">filter</code> as iterators can only be traversed once. So, trying to print out the collection of large fishes twice will not work quite as straightforwardly as you might think:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">f1</span> <span class="o">=</span> <span class="n">Fish</span><span class="p">(</span><span class="s">"Pike"</span><span class="p">,</span> <span class="mi">1870</span><span class="p">)</span>
<span class="n">f2</span> <span class="o">=</span> <span class="n">Fish</span><span class="p">(</span><span class="s">"Perch"</span><span class="p">,</span> <span class="mi">763</span><span class="p">)</span>
<span class="n">f3</span> <span class="o">=</span> <span class="n">Fish</span><span class="p">(</span><span class="s">"Pike"</span><span class="p">,</span> <span class="mi">3410</span><span class="p">)</span>
<span class="n">f4</span> <span class="o">=</span> <span class="n">Fish</span><span class="p">(</span><span class="s">"Cod"</span><span class="p">,</span> <span class="mi">2449</span><span class="p">)</span>
<span class="n">f5</span> <span class="o">=</span> <span class="n">Fish</span><span class="p">(</span><span class="s">"Roach"</span><span class="p">,</span> <span class="mi">210</span><span class="p">)</span>

<span class="n">fishes</span> <span class="o">=</span> <span class="p">[</span><span class="n">f1</span><span class="p">,</span> <span class="n">f2</span><span class="p">,</span> <span class="n">f3</span><span class="p">,</span> <span class="n">f4</span><span class="p">,</span> <span class="n">f5</span><span class="p">]</span>

<span class="n">over_a_kilo</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">fish</span> <span class="p">:</span> <span class="n">fish</span><span class="p">.</span><span class="n">weight</span> <span class="o">&gt;=</span> <span class="mi">1000</span><span class="p">,</span> <span class="n">fishes</span><span class="p">)</span>

<span class="k">for</span> <span class="n">fish</span> <span class="ow">in</span> <span class="n">over_a_kilo</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">fish</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s">"print the same again:"</span><span class="p">)</span>

<span class="k">for</span> <span class="n">Fish</span> <span class="ow">in</span> <span class="n">over_a_kilo</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">Fish</span><span class="p">)</span>
</code></pre></div></div>

<p>This would print out the following:</p>

<sample-output>

Pike (1870 g.)
Pike (3410 g.)
Cod (2449 g.)
print the same again:

</sample-output>

<p>If you need to go through the contents of a <code class="language-plaintext highlighter-rouge">filter</code> iterator more than once, you could convert the result into a list:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">fishes</span> <span class="o">=</span> <span class="p">[</span><span class="n">f1</span><span class="p">,</span> <span class="n">f2</span><span class="p">,</span> <span class="n">f3</span><span class="p">,</span> <span class="n">f4</span><span class="p">,</span> <span class="n">f5</span><span class="p">]</span>

<span class="c1"># convert the return value of the filter function into a list
</span><span class="n">over_a_kilo</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">fish</span> <span class="p">:</span> <span class="n">fish</span><span class="p">.</span><span class="n">weight</span> <span class="o">&gt;=</span> <span class="mi">1000</span><span class="p">,</span> <span class="n">fishes</span><span class="p">))</span>
</code></pre></div></div>

<programming-exercise name="Filtering attempts" tmcname="part12-12_filtering_attempts">

In this exercise we will continue with the `CourseAttempt` class.

## Accepted attempts

Please write a function named `accepted(attempts: list)` which takes a list of CourseAttempt objects as its argument. The function should return a new list of CourseAttempt objects, including only those items from the original list whose grade is at least 1.

```python
s1 = CourseAttempt("Peter Python", "Introduction to Programming", 3)
s2 = CourseAttempt("Olivia C. Objective", "Introduction to Programming", 5)
s3 = CourseAttempt("Peter Python", "Advanced Course in Programming", 0)

for attempt in accepted([s1, s2, s3]):
    print(attempt)
```

<sample-output>

Peter Python, grade for the course Introduction to Programming 3
Olivia C. Objective grade for the course Introduction to Programming 5

</sample-output>

Please implement the function using the `filter` function.

## Attempts with grade

Please write a function named `attempts_with_grade(attempts: list, grade: int)` which takes a list of CourseAttempt objects and an integer as its arguments. The function should return a new list containing only those CourseAttempt objects from the original list whose grade matches the second argument.

```python
s1 = CourseAttempt("Peter Python", "Introduction to Programming", 3)
s2 = CourseAttempt("Olivia C. Objective", "Introduction to Programming", 5)
s3 = CourseAttempt("Peter Python", "Introduction to AI", 3)
s4 = CourseAttempt("Olivia C. Objective", "Data Structures and Algorithms", 3)

for attempt in attempts_with_grade([s1, s2, s3, s4], 3):
    print(attempt)
```

<sample-output>

Peter Python, grade for the course Introduction to Programming 3
Peter Python, grade for the course Introduction to AI 3
Olivia C. Objective, grade for the course Data Structures and Algorithms 3

</sample-output>

Please implement the function using the `filter` function.

## Students who passed the course

Please write a function named `passed_students(attempts: list, course: str)` which takes a list of CourseAttempt objects and a course name as its arguments. The function should return an _alphabetically ordered_ list of names of those students who passed the course, i.e. their grade for the given course was higher than 0.

```python
s1 = CourseAttempt("Peter Python", "Introduction to Programming", 3)
s2 = CourseAttempt("Olivia C. Objective", "Introduction to AI", 5)
s3 = CourseAttempt("Peter Python", "Introduction to AI", 0)
s4 = CourseAttempt("Jack Java", "Introduction to AI", 3)

for attempt in passed_students([s1, s2, s3, s4], "Introduction to AI"):
    print(attempt)
```

<sample-output>

Jack Java
Olivia C. Objective

</sample-output>

Please implement the function using the `filter` and `map` functions.

</programming-exercise>

<h2 id="reduce">reduce</h2>

<p>A third cornerstone function in this introduction to functional programming principles is <code class="language-plaintext highlighter-rouge">reduce</code>, from the <code class="language-plaintext highlighter-rouge">functools</code> module. As the name implies, its purpose is to <em>reduce</em> the items in a series into a single value.</p>

<p>The <code class="language-plaintext highlighter-rouge">reduce</code> function starts with an operation and an initial value. It performs the given operation on each item in the series in turn, so that the value changes at each step. Once all items have been processed, the resulting value is returned.</p>

<p>We have done summation of lists of integers in different ways before, but here we have an example with the help of the <code class="language-plaintext highlighter-rouge">reduce</code> function. Notice the <code class="language-plaintext highlighter-rouge">import</code> statement; in Python versions 3 and higher it is necessary to access the <code class="language-plaintext highlighter-rouge">reduce</code> function. In older Python versions the <code class="language-plaintext highlighter-rouge">import</code> statement was not needed, so you may come across examples without it online.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="nb">reduce</span>

<span class="n">my_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>

<span class="n">sum_of_numbers</span> <span class="o">=</span> <span class="nb">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">reduced_sum</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">reduced_sum</span> <span class="o">+</span> <span class="n">item</span><span class="p">,</span> <span class="n">my_list</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">sum_of_numbers</span><span class="p">)</span>
</code></pre></div></div>

<sample-output>

11

</sample-output>

<p>Let’s take a closer look at what’s happening here. The <code class="language-plaintext highlighter-rouge">reduce</code> function takes three arguments: a function, a series of items, and an initial value. In this case, the series is a list of integers, and as we are calculating a sum, a suitable initial value is zero.</p>

<p>The first argument is a function, which represents the operation we want to perform on each item. Here the function is an anonymous lambda function:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">lambda</span> <span class="n">reduced_sum</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">reduced_sum</span> <span class="o">+</span> <span class="n">item</span>
</code></pre></div></div>

<p>This function takes two arguments: the current reduced value and the item whose turn it is to be processed. These are used to calculate a new value for the reduced value. In this case the new value is the sum of the old value and the current item.</p>

<p>It may be easier to comprehend what the <code class="language-plaintext highlighter-rouge">reduce</code> function actually does if we use a normal named function instead of a lambda function. That way we can also include helpful printouts:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="nb">reduce</span>

<span class="n">my_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>

<span class="c1"># a helper function for reduce, adds one value to the current reduced sum
</span><span class="k">def</span> <span class="nf">sum_helper</span><span class="p">(</span><span class="n">reduced_sum</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
  <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"the reduced sum is now </span><span class="si">{</span><span class="n">reduced_sum</span><span class="si">}</span><span class="s">, next item is </span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
  <span class="c1"># the new reduced sum is the old sum + the next item
</span>  <span class="k">return</span> <span class="n">reduced_sum</span> <span class="o">+</span> <span class="n">item</span>

<span class="n">sum_of_numbers</span> <span class="o">=</span> <span class="nb">reduce</span><span class="p">(</span><span class="n">sum_helper</span><span class="p">,</span> <span class="n">my_list</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">sum_of_numbers</span><span class="p">)</span>
</code></pre></div></div>

<p>The program prints out:</p>

<sample-output>

the reduced sum is now 0, next item is 2
the reduced sum is now 2, next item is 3
the reduced sum is now 5, next item is 1
the reduced sum is now 6, next item is 5
11

</sample-output>

<p>First, the function takes care of the item with value 2. To begin with, the reduced sum is 0, which is the initial value passed to the <code class="language-plaintext highlighter-rouge">reduce</code> function. The function calculates and returns the sum of these two: <code class="language-plaintext highlighter-rouge">0 + 2 = 2</code>.</p>

<p>This is the value stored in <code class="language-plaintext highlighter-rouge">reduced_sum</code> as the <code class="language-plaintext highlighter-rouge">reduce</code> function processes the next item on the list, with value 3. The function calculates and returns the sum of these two: <code class="language-plaintext highlighter-rouge">2 + 3 = 5</code>. This result is then used when processing the next item, and so forth, and so forth.</p>

<p>Now, summation is simple, as there is even the built-in <code class="language-plaintext highlighter-rouge">sum</code> function for this purpose. But how about multiplication? Only minor changes are needed to create a reduced product:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="nb">reduce</span>

<span class="n">my_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>

<span class="n">product_of_list</span> <span class="o">=</span> <span class="nb">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">product</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">product</span> <span class="o">*</span> <span class="n">item</span><span class="p">,</span> <span class="n">my_list</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">product_of_list</span><span class="p">)</span>
</code></pre></div></div>

<sample-output>

480

</sample-output>

<p>As we are dealing with multiplication the initial value is not zero. Instead, we use 1. What would happen if we used 0 as the initial value?</p>

<p>Above we have dealt largely with integers, but <code class="language-plaintext highlighter-rouge">map</code>, <code class="language-plaintext highlighter-rouge">filter</code> and <code class="language-plaintext highlighter-rouge">reduce</code> can all handle a collection of objects of any type.</p>

<p>As an example, let’s generate a sum total of the balances of all accounts in a bank, with the help of <code class="language-plaintext highlighter-rouge">reduce</code>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">BankAccount</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">account_number</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">balance</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">__account_number</span> <span class="o">=</span> <span class="n">account_number</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">__balance</span> <span class="o">=</span> <span class="n">balance</span>

    <span class="k">def</span> <span class="nf">deposit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">amount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">__balance</span> <span class="o">+=</span> <span class="n">amount</span>

    <span class="k">def</span> <span class="nf">get_balance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">__balance</span>

<span class="n">a1</span> <span class="o">=</span> <span class="n">BankAccount</span><span class="p">(</span><span class="s">"123456"</span><span class="p">,</span> <span class="s">"Randy Riches"</span><span class="p">,</span> <span class="mi">5000</span><span class="p">)</span>
<span class="n">a2</span> <span class="o">=</span> <span class="n">BankAccount</span><span class="p">(</span><span class="s">"12321"</span><span class="p">,</span> <span class="s">"Paul Pauper"</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">a3</span> <span class="o">=</span> <span class="n">BankAccount</span><span class="p">(</span><span class="s">"223344"</span><span class="p">,</span> <span class="s">"Mary Millionaire "</span><span class="p">,</span> <span class="mi">1000000</span><span class="p">)</span>

<span class="n">accounts</span> <span class="o">=</span> <span class="p">[</span><span class="n">a1</span><span class="p">,</span> <span class="n">a2</span><span class="p">,</span> <span class="n">a3</span><span class="p">]</span>

<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="nb">reduce</span>

<span class="k">def</span> <span class="nf">balance_sum_helper</span><span class="p">(</span><span class="n">balance_sum</span><span class="p">,</span> <span class="n">account</span><span class="p">):</span>
  <span class="k">return</span> <span class="n">balance_sum</span> <span class="o">+</span> <span class="n">account</span><span class="p">.</span><span class="n">get_balance</span><span class="p">()</span>

<span class="n">balances_total</span> <span class="o">=</span> <span class="nb">reduce</span><span class="p">(</span><span class="n">balance_sum_helper</span><span class="p">,</span> <span class="n">accounts</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s">"The total of the bank's balances:"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">balances_total</span><span class="p">)</span>
</code></pre></div></div>

<p>This program would print out:</p>

<sample-output>

The total of the bank's balances:
1005001

</sample-output>

<p>The <code class="language-plaintext highlighter-rouge">balance_sum_helper</code> function grabs the balance of each bank account, with the method dedicated for the purpose in the <code class="language-plaintext highlighter-rouge">BankAccount</code> class definition:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">balance_sum_helper</span><span class="p">(</span><span class="n">balance_sum</span><span class="p">,</span> <span class="n">account</span><span class="p">):</span>
  <span class="k">return</span> <span class="n">balance_sum</span> <span class="o">+</span> <span class="n">account</span><span class="p">.</span><span class="n">get_balance</span><span class="p">()</span>
</code></pre></div></div>

<text-box variant="hint" name="Reduce without an initial value">

You do not need to always pass a third argument to the `reduce` function. For instance, summation would work just as well _without_ the initial value:

```python
my_list = [2, 3, 1, 5]

sum_of_numbers = reduce(lambda reduced_sum, item: reduced_sum + item, my_list)

print(sum_of_numbers)
```

If the initial value is left out, `reduce` takes the first item in the list as the initial value and starts reducing from the second item onwards.

</text-box>

<p><strong>NB:</strong> if the items in the series are of a different type than the intended reduced result, the thrd argument is mandatory. The example with the bank accounts would not work without the initial value. That is, trying this</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">balances_total</span> <span class="o">=</span> <span class="nb">reduce</span><span class="p">(</span><span class="n">balance_sum_helper</span><span class="p">,</span> <span class="n">accounts</span><span class="p">)</span>
</code></pre></div></div>

<p>would produce an error:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">TypeError</span><span class="p">:</span> <span class="n">unsupported</span> <span class="n">operand</span> <span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="o">+</span><span class="p">:</span> <span class="s">'BankAccount'</span> <span class="ow">and</span> <span class="s">'int'</span>
</code></pre></div></div>

<p>In the above case, when <code class="language-plaintext highlighter-rouge">reduce</code> tries to execute the <code class="language-plaintext highlighter-rouge">balance_sum_helper</code> function for the first time, the arguments it uses are the <em>two first items in the list</em>, which are both of type BankAccount. Specifically, the value assigned to the parameter <code class="language-plaintext highlighter-rouge">balance_sum</code> is the first item in the list.  The <code class="language-plaintext highlighter-rouge">balance_sum_helper</code> function tries to add an integer value to it, but adding an integer directly to a BankAccount object is not a supported operation.</p>

<programming-exercise name="Study credits" tmcname="part12-13_credits">

In this exercise we will work with a slightly modified version of the `CourseAttempt` class. The name of the student is omitted, but the number of credits is included. The class works as follows:

```python
attempt = CourseAttempt("Data Structures and Algorithms", 3, 10)
print(attempt)
print(attempt.course_name)
print(attempt.credits)
print(attempt.grade)
```

<sample-output>

Data Structures and Algorithms (10 cr) grade 3
Data Structures and Algorithms
10
3

</sample-output>

## The sum of all credits

Please implement a function named `sum_of_all_credits` which takes a list of course attempts as its argument. The function sums up the total number of study credits covered by the courses. It should work like this:

```python
s1 = CourseAttempt("Introduction to Programming", 5, 5)
s2 = CourseAttempt("Advanced Course in Programming", 4, 5)
s3 = CourseAttempt("Data Structures and Algorithms", 3, 10)
credit_sum = sum_of_all_credits([s1, s2, s3])
print(credit_sum)
```

<sample-output>

20

</sample-output>

Please implement the function using the `reduce` function.

## The sum of passed credits

Please implement a function named `sum_of_passed_credits` which takes a list of course attempts as its argument. The function sums up the credits for the course attempts with grade 1 or above. It should work like this:

```python
s1 = CourseAttempt("Introduction to Programming", 5, 5)
s2 = CourseAttempt("Advanced Course in Programming", 0, 4)
s3 = CourseAttempt("Data Structures and Algorithms", 3, 10)
credit_sum = sum_of_passed_credits([s1, s2, s3])
print(credit_sum)
```

<sample-output>

15

</sample-output>

Please implement the function using the `reduce` and `filter` functions.

## Average grade for passed courses

Please implement a function named `average` which takes a list of course attempts as its argument. The function calculates the average grade for the course attempts with grade 1 or above. It should work like this:

```python
s1 = CourseAttempt("Introduction to Programming", 5, 5)
s2 = CourseAttempt("Advanced Course in Programming", 0, 4)
s3 = CourseAttempt("Data Structures and Algorithms", 3, 10)
ag = average([s1, s2, s3])
print(ag)
```

<sample-output>

4.0

</sample-output>

Please implement the function using the `reduce` and `filter` functions. NB: the exercise asks for a simple mean value, not a weighted average.

While working on this exercise, it is likely worth remembering that [the return value of filter is an iterator](/part-12/3-functional-programming#the-return-value-of-filter-is-an-iterator).

</programming-exercise>


      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
