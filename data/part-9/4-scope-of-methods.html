<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Scope of methods | programming-25</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Scope of methods" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="https://gapps123.github.io/programming-25/programming-25/data/part-9/4-scope-of-methods.html" />
<meta property="og:url" content="https://gapps123.github.io/programming-25/programming-25/data/part-9/4-scope-of-methods.html" />
<meta property="og:site_name" content="programming-25" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Scope of methods" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","headline":"Scope of methods","url":"https://gapps123.github.io/programming-25/programming-25/data/part-9/4-scope-of-methods.html"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/programming-25/assets/css/style.css?v=8fdccb165fdb68b261d29b53eab9f8c397ee01cf">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/programming-25/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="https://gapps123.github.io/programming-25/programming-25/">programming-25</a></h1>
      

      <text-box variant="learningObjectives" name="Learning objectives">

After this section

- You will know how you can limit the visibility of a method in Python
- You will be able to write private methods

</text-box>

<p>The methods defined within a class can be hidden in exactly the same way as the attributes were in the previous section. If the method begins with two underscores <code class="language-plaintext highlighter-rouge">__</code>, it is not directly accessible by the client.</p>

<p>So, the technique is the same for both methods and attributes, but the use cases are usually a little different. Private attributes often come paired with getter and setter methods for controlling access to them. Private methods, on the other hand, are usually intended for internal use only, as helper methods for processes which the client does not need to know about.</p>

<p>A private method can be used within the class just like any other method, of course remembering to include the <code class="language-plaintext highlighter-rouge">self</code> prefix. The following is a simple class representing the recipient of email letters. It includes a private helper method for checking the email address is in a valid format:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Recipient</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">email</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">__name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">__check_email</span><span class="p">(</span><span class="n">email</span><span class="p">):</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">__email</span> <span class="o">=</span> <span class="n">email</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="nb">ValueError</span><span class="p">(</span><span class="s">"The email address is not valid"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__check_email</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">email</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="c1"># A simple check: the address must be over 5 characters long 
</span>        <span class="c1"># and contain a dot and an @ character
</span>        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">email</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">5</span> <span class="ow">and</span> <span class="s">"."</span> <span class="ow">in</span> <span class="n">email</span> <span class="ow">and</span> <span class="s">"@"</span> <span class="ow">in</span> <span class="n">email</span>
</code></pre></div></div>

<p>Attempting to call the private method directly causes an error:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">peter</span> <span class="o">=</span> <span class="n">Recipient</span><span class="p">(</span><span class="s">"Peter Emailer"</span><span class="p">,</span> <span class="s">"peter@example.com"</span><span class="p">)</span>
<span class="n">peter</span><span class="p">.</span><span class="n">__check_email</span><span class="p">(</span><span class="s">"someone@example.com"</span><span class="p">)</span>
</code></pre></div></div>

<sample-output>

AttributeError: 'Recipient' object has no attribute '__check_email'

</sample-output>

<p>Within the class the method can be accessed normally, and it makes sense to use it also for setting a new value for the address. Let’s add getter and setter methods for the email address:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Recipient</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">email</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">__name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">__check_email</span><span class="p">(</span><span class="n">email</span><span class="p">):</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">__email</span> <span class="o">=</span> <span class="n">email</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="nb">ValueError</span><span class="p">(</span><span class="s">"The email address is not valid"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__check_email</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">email</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="c1"># A simple check: the address must be over 5 characters long 
</span>        <span class="c1"># and contain a dot and an @ character
</span>        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">email</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">5</span> <span class="ow">and</span> <span class="s">"."</span> <span class="ow">in</span> <span class="n">email</span> <span class="ow">and</span> <span class="s">"@"</span> <span class="ow">in</span> <span class="n">email</span>

    <span class="o">@</span><span class="nb">property</span>
    <span class="k">def</span> <span class="nf">email</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">__email</span>

    <span class="o">@</span><span class="n">email</span><span class="p">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">email</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">email</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">__check_email</span><span class="p">(</span><span class="n">email</span><span class="p">):</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">__email</span> <span class="o">=</span> <span class="n">email</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="nb">ValueError</span><span class="p">(</span><span class="s">"The email address is not valid"</span><span class="p">)</span>
</code></pre></div></div>

<text-box variant="info" name="Python scope and namespace">

We already came across the term _scope_ in [part 6](/part-6/4-scope-of-variables) of this material, and defined it as the sections of a program where a (variable) name is visible. Looking at the term from another direction, it also refers to what is visible from a specific point in program code. Another related term is _namespace_, which refers to the names specifically available within a defined Python unit, such as a class or a function definition.

The scope within a method is different from the scope within a class, which is again different from the scope at the client code which creates an instance of the class. A method has access to its local variables, but also to the attributes and other methods in the class it is a part of, even if they are private. The class also has access to these, its own members, but it cannot directly access the local variables within its methods. The client code has access to only the public methods and attributes defined in the class, but of course also some other names in the environment in which it exists.

It may seem counter-intuitive that a class would not have access to all its contents, but it is essential for ensuring integrity. For example, it might make sense to use the same local variable name in various different methods within the same class, if they perform somehow similar functionalities. If the class had direct access to all of the local variables within the methods, they would have to be named differently, or else it would not be clear which version of the variable was meant where. We have already seen with attributes declared with `self` that helper variables should not be made accessible outside a method, so adding the variables as attributes or global variables should not be an option. There has to be a way to keep names in different parts of the program separate, and this is what namespaces are for.

The idea of a namespace helps with understanding how the same name can happily coexist in different functions, classes or modules at the same time. If a name is specific to a namespace, such as a method definition, it is not directly accessible outside it, and so there is no reason why another namespace could not use the same name. Mastering namespaces and scopes is essential in becoming a proficient programmer, and you will get much practice on this course.

</text-box>

<h2 id="do-i-need-a-private-method">Do I need a private method?</h2>

<p>In the following example the class <code class="language-plaintext highlighter-rouge">DeckOfCards</code> is a model for a deck of 52 cards. It contains the helper method <code class="language-plaintext highlighter-rouge">__reset_deck</code>, which creates a new shuffled deck of cards. The private method is at the moment only called in the constructor method, so the implementation could arguably be placed directly in the constructor. However, using a separate method makes the code easier to read and also makes it possible to access the functionality later in other methods if necessary.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">shuffle</span>

<span class="k">class</span> <span class="nc">DeckOfCards</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">__reset_deck</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__reset_deck</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">__deck</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># Add all 52 cards to the deck
</span>        <span class="n">suits</span> <span class="o">=</span> <span class="p">[</span><span class="s">"spades"</span><span class="p">,</span> <span class="s">"hearts"</span><span class="p">,</span> <span class="s">"clubs"</span><span class="p">,</span> <span class="s">"diamonds"</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">suit</span> <span class="ow">in</span> <span class="n">suits</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">number</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">14</span><span class="p">):</span>
                <span class="bp">self</span><span class="p">.</span><span class="n">__deck</span><span class="p">.</span><span class="n">append</span><span class="p">((</span><span class="n">suit</span><span class="p">,</span> <span class="n">number</span><span class="p">))</span>
        <span class="c1"># Shuffle the deck
</span>        <span class="n">shuffle</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">__deck</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">deal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number_of_cards</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="n">hand</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># Move the top cards in the deck to the hand
</span>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">number_of_cards</span><span class="p">):</span>
            <span class="n">hand</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">__deck</span><span class="p">.</span><span class="n">pop</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">hand</span>
</code></pre></div></div>

<p>Let’s test the class:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">deck</span> <span class="o">=</span> <span class="n">DeckOfCards</span><span class="p">()</span>
<span class="n">hand1</span> <span class="o">=</span> <span class="n">deck</span><span class="p">.</span><span class="n">deal</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">hand1</span><span class="p">)</span>
<span class="n">hand2</span> <span class="o">=</span> <span class="n">deck</span><span class="p">.</span><span class="n">deal</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">hand2</span><span class="p">)</span>
</code></pre></div></div>

<p>As the hands are randomly generated, the following is only an example of what could be printed out:</p>

<sample-output>

[('spades', 7), ('spades', 11), ('hearts', 7), ('diamonds', 3), ('spades', 4)]
[('clubs', 8), ('spades', 12), ('diamonds', 13), ('clubs', 11), ('spades', 10)]

</sample-output>

<p>Private methods are generally less common than private attributes. As a rule of thumb, a method should be hidden whenever the client has no need to directly access it. This is especially the case when it is possible that the client could adversely affect the integrity of the object by calling the method.</p>

<programming-exercise name="Service charge" tmcname="part09-12_service_charge">

Please create a class named `BankAccount` which models a bank account. The class should contain 

* a constructor which takes the name of the owner (str), account number (str) and balance (float) as arguments
* a method `deposit(amount: float)` for depositing money to the account
* a method `withdraw(amount: float)` for withdrawing money from the account
* a getter method `balance` which returns the balance of the account

The class should also contain the private method

* `__service_charge()`, which decreases the balance on the account by one percent. Whenever either of the methods `deposit` or `withdraw` is called, this method should also be called. The service charge is calculated and subtracted only after the actual operation is completed (that is, after the amount specified has been added to or subtracted from the balance).

All data attributes within the class definition should be private.

You may use the following code for testing your class:

```python
account = BankAccount("Randy Riches", "12345-6789", 1000)
account.withdraw(100)
print(account.balance)
account.deposit(100)
print(account.balance)

```

<sample-output>

891.0
981.09

</sample-output>


</programming-exercise>



      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
