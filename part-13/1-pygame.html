<text-box variant="learningObjectives" name="Learning objectives">

After this section

- You will have installed the pygame library on your computer
- You will know how to create a pygame window and how to exit a program
- You will be able to use an image stored in a file in a pygame window

</text-box>

<p>In these last two parts of this course material we will get to grips with the pygame library. It is a Python library for programming games. It helps you create graphical elements, handle events from the keyboard and the mouse, and implement other features necessary in games.</p>

<h2 id="installing-pygame">Installing pygame</h2>

<h3 id="linux">Linux</h3>

<p>Open a command line, type in <code class="language-plaintext highlighter-rouge">pip3 install pygame</code> an press <code class="language-plaintext highlighter-rouge">enter</code>.</p>

<p><img src="pygame_linux.png" /></p>

<p>This should install the pygame library on your computer.</p>

<h3 id="windows">Windows</h3>

<p>Open the Windows terminal by opening the menu, typing in <code class="language-plaintext highlighter-rouge">cmd</code> and pressing <code class="language-plaintext highlighter-rouge">enter</code>:</p>

<p><img src="13_1_1.png" /></p>

<p>The command line interpreter window should open. Type in <code class="language-plaintext highlighter-rouge">pip3 install pygame</code> and press <code class="language-plaintext highlighter-rouge">enter</code>.</p>

<p>This should install the pygame library on your computer.</p>

<p>Installation may require system administrator privileges. If the above doesn’t work, you can try running the terminal application as an administrator: open the Windows menu, find the CMD application, right-click it and choose “Run as administrator”.</p>

<p>Installing and accessing pygame requires that your Python installation is added to path, as instructed <a href="https://www.mooc.fi/en/installation/vscode/#python3">here</a>.</p>

<h3 id="mac">Mac</h3>

<p>Open the <em>Terminal</em>, for example through the magnifying glass symbol in the top right corner:</p>

<p><img src="13-1-2.png" /></p>

<p>The search tool should open. Type in <code class="language-plaintext highlighter-rouge">terminal</code> and press <code class="language-plaintext highlighter-rouge">enter</code>:</p>

<p><img src="13-1-3.png" /></p>

<p>Type in the following and press <code class="language-plaintext highlighter-rouge">enter</code>:</p>

<p><code class="language-plaintext highlighter-rouge">pip3 install pygame</code></p>

<p><img src="13-1-4.png" /></p>

<p>This should install the pygame library on your computer.</p>

<h2 id="your-first-program">Your first program</h2>

<p>Here is a simple program for checking your pygame installation works correctly:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">pygame</span>

<span class="n">pygame</span><span class="p">.</span><span class="n">init</span><span class="p">()</span>
<span class="n">window</span> <span class="o">=</span> <span class="n">pygame</span><span class="p">.</span><span class="n">display</span><span class="p">.</span><span class="n">set_mode</span><span class="p">((</span><span class="mi">640</span><span class="p">,</span> <span class="mi">480</span><span class="p">))</span>

<span class="n">window</span><span class="p">.</span><span class="n">fill</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
<span class="n">pygame</span><span class="p">.</span><span class="n">display</span><span class="p">.</span><span class="n">flip</span><span class="p">()</span>

<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">pygame</span><span class="p">.</span><span class="n">event</span><span class="p">.</span><span class="n">get</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">event</span><span class="p">.</span><span class="nb">type</span> <span class="o">==</span> <span class="n">pygame</span><span class="p">.</span><span class="n">QUIT</span><span class="p">:</span>
            <span class="nb">exit</span><span class="p">()</span>
</code></pre></div></div>

<p>When this program is run, it should display a window:</p>

<p><img src="pygame_first.gif" /></p>

<p>The program only consists of displaying a window, and it runs until the user closes the window.</p>

<p>Let’s take a closer look at the steps required to achieve this. The first line takes the pygame library into use: <code class="language-plaintext highlighter-rouge">import pygame</code>. The next command <code class="language-plaintext highlighter-rouge">pygame.init</code> initializes the pygame modules, and the next one creates a window with the function <code class="language-plaintext highlighter-rouge">pygame.display.set_mode</code>.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">pygame</span><span class="p">.</span><span class="n">init</span><span class="p">()</span>
<span class="n">window</span> <span class="o">=</span> <span class="n">pygame</span><span class="p">.</span><span class="n">display</span><span class="p">.</span><span class="n">set_mode</span><span class="p">((</span><span class="mi">640</span><span class="p">,</span> <span class="mi">480</span><span class="p">))</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">set_mode</code> function takes the window dimensions as an argument. The tuple <code class="language-plaintext highlighter-rouge">(640, 480)</code> indicates that the window is 640 pixels wide and 480 pixels high. The variable name <code class="language-plaintext highlighter-rouge">window</code> can be used later to access the window, for example to draw something in it.</p>

<p>The following two commands do just that:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">window</span><span class="p">.</span><span class="n">fill</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="n">pygame</span><span class="p">.</span><span class="n">display</span><span class="p">.</span><span class="n">flip</span><span class="p">()</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">fill</code> method fills the window with the colour passed as an argument. In this case the colour is black, passed as an RGB value in the tuple <code class="language-plaintext highlighter-rouge">(0, 0, 0)</code>. The <code class="language-plaintext highlighter-rouge">pygame.display.flip</code> updates the contents of the window.</p>

<p>After these initialization commands the <em>main loop</em> of the program begins:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">pygame</span><span class="p">.</span><span class="n">event</span><span class="p">.</span><span class="n">get</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">event</span><span class="p">.</span><span class="nb">type</span> <span class="o">==</span> <span class="n">pygame</span><span class="p">.</span><span class="n">QUIT</span><span class="p">:</span>
            <span class="nb">exit</span><span class="p">()</span>
</code></pre></div></div>

<p>The main loop handles all events the operating system passes to the program. With each iteration the function <code class="language-plaintext highlighter-rouge">pygame.event.get</code> returns a list of any events collected since the previous iteration.</p>

<p>In the example above the program only handles events of type <code class="language-plaintext highlighter-rouge">pygame.QUIT</code>. This event is raised by, for example, clicking on the exit button in the corner of the window. If the <code class="language-plaintext highlighter-rouge">pygame.QUIT</code> event is raised, the program exits through the <code class="language-plaintext highlighter-rouge">exit</code> function.</p>

<p>You can try and see what happens if your program doesn’t handle the <code class="language-plaintext highlighter-rouge">pygame.QUIT</code> event. This should mean that clicking on the exit button does nothing, which would be confusing for the user. As the program is run from the command line, you can still stop it from the command line with Control+C.</p>

<h2 id="add-an-image">Add an image</h2>

<p>Let’s add an image to the window:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">pygame</span>

<span class="n">pygame</span><span class="p">.</span><span class="n">init</span><span class="p">()</span>
<span class="n">window</span> <span class="o">=</span> <span class="n">pygame</span><span class="p">.</span><span class="n">display</span><span class="p">.</span><span class="n">set_mode</span><span class="p">((</span><span class="mi">640</span><span class="p">,</span> <span class="mi">480</span><span class="p">))</span>

<span class="n">robot</span> <span class="o">=</span> <span class="n">pygame</span><span class="p">.</span><span class="n">image</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="s">"robot.png"</span><span class="p">)</span>

<span class="n">window</span><span class="p">.</span><span class="n">fill</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="n">window</span><span class="p">.</span><span class="n">blit</span><span class="p">(</span><span class="n">robot</span><span class="p">,</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">50</span><span class="p">))</span>
<span class="n">pygame</span><span class="p">.</span><span class="n">display</span><span class="p">.</span><span class="n">flip</span><span class="p">()</span>

<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">pygame</span><span class="p">.</span><span class="n">event</span><span class="p">.</span><span class="n">get</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">event</span><span class="p">.</span><span class="nb">type</span> <span class="o">==</span> <span class="n">pygame</span><span class="p">.</span><span class="n">QUIT</span><span class="p">:</span>
            <span class="nb">exit</span><span class="p">()</span>
</code></pre></div></div>

<p>The program uses this image of a robot, which is stored in the file <code class="language-plaintext highlighter-rouge">robot.png</code>:</p>

<p><img src="robot.png" /></p>

<p>The file <code class="language-plaintext highlighter-rouge">robot.png</code> has to be in the same directory with the source code of the your program, or the program won’t be able to find it. In the exercise templates for this part the images are waiting in the exercise directory.</p>

<p>The window should now look like this:</p>

<p><img src="pygame_pic.gif" /></p>

<p>The function <code class="language-plaintext highlighter-rouge">pygame.image.load</code> loads the image in the file <code class="language-plaintext highlighter-rouge">robot.png</code> and stores a reference to it in the variable named <code class="language-plaintext highlighter-rouge">robot</code>. The method <code class="language-plaintext highlighter-rouge">blit</code> draws the image at the location <code class="language-plaintext highlighter-rouge">(100, 50)</code>, and the function <code class="language-plaintext highlighter-rouge">pygame.display.flip</code> updates the window contents, as before. The location <code class="language-plaintext highlighter-rouge">(100, 50)</code> means that the <em>top left corner</em> of the image is at that location within the window.</p>

<p>In pygame the origo point <code class="language-plaintext highlighter-rouge">(0, 0)</code> is in the top left corner of the window. The x coordinates increase to the right, and the y coordinates increase downwards, so that the bottom right corner has the coordinates <code class="language-plaintext highlighter-rouge">(640, 480)</code>. This is contrary to how coordinates are usually handled in e.g. mathematics, but it is quite common in a programming context, and worth getting used to.</p>

<p>Once you have loaded an image, you can use it many times within the same window. The following code draws the image of the robot at three different locations:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">window</span><span class="p">.</span><span class="n">blit</span><span class="p">(</span><span class="n">robot</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="n">window</span><span class="p">.</span><span class="n">blit</span><span class="p">(</span><span class="n">robot</span><span class="p">,</span> <span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="n">window</span><span class="p">.</span><span class="n">blit</span><span class="p">(</span><span class="n">robot</span><span class="p">,</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">))</span>
</code></pre></div></div>

<p>The window should look like this as a result:</p>

<p><img src="pygame_pic2.gif" /></p>

<p>Here we set the location of the image so that it lies at the centre of the window:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">width</span> <span class="o">=</span> <span class="n">robot</span><span class="p">.</span><span class="n">get_width</span><span class="p">()</span>
<span class="n">height</span> <span class="o">=</span> <span class="n">robot</span><span class="p">.</span><span class="n">get_height</span><span class="p">()</span>
<span class="n">window</span><span class="p">.</span><span class="n">blit</span><span class="p">(</span><span class="n">robot</span><span class="p">,</span> <span class="p">(</span><span class="mi">320</span><span class="o">-</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">240</span><span class="o">-</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">))</span>
</code></pre></div></div>

<p>The window should now look like this:</p>

<p><img src="pygame_pic3.gif" /></p>

<p>The method <code class="language-plaintext highlighter-rouge">get_width</code> returns the width of the image, and the method <code class="language-plaintext highlighter-rouge">get_height</code> returns its height, both in pixels. The centre of the window is at half its width and height, so at <code class="language-plaintext highlighter-rouge">(320, 240)</code>, which we can use to calculate a suitable location for the top left corner of the image, so that it lies exactly at the centre.</p>

<text-box variant="hint" name="Pygame exercises">

The exercises in this part of the course have no automated tests, as the results as visually verified. The tests grant points automatically as you submit your solution to the server, no matter what your implementation. Only submit your solution when you are ready, and your solution matches the exercise description. The exercises may not have automatic tests, but the course staff will still see your solution. Also submitting incomplete solution to TMC Paste grants points automatically, so it should not be used when asking for help with the exercises in this part. You can use [Pastebin.com](https://pastebin.com/) or some another internet pastebin service when asking for help in the course's support channels.

If your solution clearly does not match the exercise description, you may lose the points granted for the exercises in this part.

</text-box>

<programming-exercise name="Four robots" tmcname="part13-01_four_robots">

Please write a program which draws a robot in each of the four corners of the window. The end result should look like this:

<img src="pygame_four.gif" />

</programming-exercise>

<programming-exercise name="Robots in a row" tmcname="part13-02_robots_row">

Please write a program which draws ten robots in a row. The end result should look like this:

<img src="pygame_row.gif" />

</programming-exercise>

<programming-exercise name="A hundred robots" tmcname="part13-03_hundred_robots">

Please write a program which draws a hundred robots: ten rows with ten robots in each row. The end result should look like this:

<img src="pygame_hundred.gif" />

</programming-exercise>

<programming-exercise name="Random robots" tmcname="part13-04_random_robots">

Please write a program which draws _a thousand_ robots in random places. The end result should look like this:

<img src="pygame_thousand.gif" />

</programming-exercise>
