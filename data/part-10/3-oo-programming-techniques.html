<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Object oriented programming techniques | programming-25</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Object oriented programming techniques" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="https://gapps123.github.io/programming-25/programming-25/data/part-10/3-oo-programming-techniques.html" />
<meta property="og:url" content="https://gapps123.github.io/programming-25/programming-25/data/part-10/3-oo-programming-techniques.html" />
<meta property="og:site_name" content="programming-25" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Object oriented programming techniques" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","headline":"Object oriented programming techniques","url":"https://gapps123.github.io/programming-25/programming-25/data/part-10/3-oo-programming-techniques.html"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/programming-25/assets/css/style.css?v=8fdccb165fdb68b261d29b53eab9f8c397ee01cf">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/programming-25/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="https://gapps123.github.io/programming-25/programming-25/">programming-25</a></h1>
      

      <text-box variant="learningObjectives" name="Learning objectives">

After this section

- You will be familiar with some of the different uses for the variable name `self`
- You will know how to overload operators in your own classes
- You will be able to create an iterable class

</text-box>

<p>A class can contain a method which returns an object of the very same class. For example, below we have the class <code class="language-plaintext highlighter-rouge">Product</code>, whose method <code class="language-plaintext highlighter-rouge">product_on_sale</code> returns a new Product object with the same name as the original but with a price which is 25 % lower:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Product</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">price</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">__name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">__price</span> <span class="o">=</span> <span class="n">price</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">__name</span><span class="si">}</span><span class="s"> (price </span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">__price</span><span class="si">}</span><span class="s">)"</span>

    <span class="k">def</span> <span class="nf">product_on_sale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">on_sale</span> <span class="o">=</span> <span class="n">Product</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">__name</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">__price</span> <span class="o">*</span> <span class="mf">0.75</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">on_sale</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apple1</span> <span class="o">=</span> <span class="n">Product</span><span class="p">(</span><span class="s">"Apple"</span><span class="p">,</span> <span class="mf">2.99</span><span class="p">)</span>
<span class="n">apple2</span> <span class="o">=</span> <span class="n">apple1</span><span class="p">.</span><span class="n">product_on_sale</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">apple1</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">apple2</span><span class="p">)</span>
</code></pre></div></div>

<sample-output>

Apple (price 2.99)
Apple (price 2.2425)

</sample-output>

<p>Let’s review the purpose of the variable <code class="language-plaintext highlighter-rouge">self</code>: within a class definition it refers to the object itself. Typically it is used to refer to the object’s own traits, its attributes and methods. The variable can be used to refer to the entire object as well, for example if the object itself needs to be returned to the client code. In the example below we’ve added the method <code class="language-plaintext highlighter-rouge">cheaper</code> to the class definition. It takes another Product as its argument and returns the cheaper of the two:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Product</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">price</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">__name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">__price</span> <span class="o">=</span> <span class="n">price</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">__name</span><span class="si">}</span><span class="s"> (price </span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">__price</span><span class="si">}</span><span class="s">)"</span>

    <span class="o">@</span><span class="nb">property</span>
    <span class="k">def</span> <span class="nf">price</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">__price</span>

    <span class="k">def</span> <span class="nf">cheaper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Product</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">__price</span> <span class="o">&lt;</span> <span class="n">Product</span><span class="p">.</span><span class="n">price</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Product</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apple</span> <span class="o">=</span> <span class="n">Product</span><span class="p">(</span><span class="s">"Apple"</span><span class="p">,</span> <span class="mf">2.99</span><span class="p">)</span>
<span class="n">orange</span> <span class="o">=</span> <span class="n">Product</span><span class="p">(</span><span class="s">"Orange"</span><span class="p">,</span> <span class="mf">3.95</span><span class="p">)</span>
<span class="n">banana</span> <span class="o">=</span> <span class="n">Product</span><span class="p">(</span><span class="s">"Banana"</span><span class="p">,</span> <span class="mf">5.25</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">orange</span><span class="p">.</span><span class="n">cheaper</span><span class="p">(</span><span class="n">apple</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">orange</span><span class="p">.</span><span class="n">cheaper</span><span class="p">(</span><span class="n">banana</span><span class="p">))</span>
</code></pre></div></div>

<sample-output>

Apple (2.99)
Orange (3.95)

</sample-output>

<p>While this works just fine, it is a very specialised case of comparing two objects. It would be better if we could use the Python comparison operators directly on these <code class="language-plaintext highlighter-rouge">Product</code> objects.</p>

<h2 id="overloading-operators">Overloading operators</h2>

<p>Python contains some specially named built-in methods for working with the standard arithmetic and comparison operators. The technique is called <em>operator overloading</em>. If you want to be able to use a certain operator on instances of self-defined classes, you can write a special method which returns the correct result of the operator. We have already used this technique with the <code class="language-plaintext highlighter-rouge">__str__</code> method: Python knows to look for a method named like this when a string representation of an object is called for.</p>

<p>Let’s start with the operator <code class="language-plaintext highlighter-rouge">&gt;</code> which tells us if the first operand is greater than the second. The <code class="language-plaintext highlighter-rouge">Product</code> class definition below contains the method <code class="language-plaintext highlighter-rouge">__gt__</code>, which is short for <em>g</em>reater <em>t</em>han. This specially named method should return the correct result of the comparison. Specifically, it should return <code class="language-plaintext highlighter-rouge">True</code> if and only if the current object is greater than the object passed as an argument. The criteria used can be determined by the programmer. By <em>current object</em> we mean the object on which the method is called with the dot <code class="language-plaintext highlighter-rouge">.</code> notation.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Product</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">price</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">__name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">__price</span> <span class="o">=</span> <span class="n">price</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">__name</span><span class="si">}</span><span class="s"> (price </span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">__price</span><span class="si">}</span><span class="s">)"</span>

    <span class="o">@</span><span class="nb">property</span>
    <span class="k">def</span> <span class="nf">price</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">__price</span>

    <span class="k">def</span> <span class="nf">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">another_product</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">price</span> <span class="o">&gt;</span> <span class="n">another_product</span><span class="p">.</span><span class="n">price</span>
</code></pre></div></div>

<p>In the implementation above, the method <code class="language-plaintext highlighter-rouge">__gt__</code> returns <code class="language-plaintext highlighter-rouge">True</code> if the price of the current product is greater than the price of the product passed as an argument. Otherwise the method returns <code class="language-plaintext highlighter-rouge">False</code>.</p>

<p>Now the comparison operator <code class="language-plaintext highlighter-rouge">&gt;</code> is available for use with objects of type Product:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">orange</span> <span class="o">=</span> <span class="n">Product</span><span class="p">(</span><span class="s">"Orange"</span><span class="p">,</span> <span class="mf">2.90</span><span class="p">)</span>
<span class="n">apple</span> <span class="o">=</span> <span class="n">Product</span><span class="p">(</span><span class="s">"Apple"</span><span class="p">,</span> <span class="mf">3.95</span><span class="p">)</span>

<span class="k">if</span> <span class="n">orange</span> <span class="o">&gt;</span> <span class="n">apple</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Orange is greater"</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Apple is greater"</span><span class="p">)</span>
</code></pre></div></div>

<sample-output>

Apple is greater

</sample-output>

<p>As stated above, it is up to the programmer to determine the criteria by which it is decided which is greater and which is lesser. We could, for instance, decide that the order should not be based on price, but be alphabetical by name instead. This would mean that <code class="language-plaintext highlighter-rouge">orange</code> would now be “greater than” <code class="language-plaintext highlighter-rouge">apple</code>, as “orange” comes alphabetically last.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Product</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">price</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">__name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">__price</span> <span class="o">=</span> <span class="n">price</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">__name</span><span class="si">}</span><span class="s"> (price </span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">__price</span><span class="si">}</span><span class="s">)"</span>

    <span class="o">@</span><span class="nb">property</span>
    <span class="k">def</span> <span class="nf">price</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">__price</span>

    <span class="o">@</span><span class="nb">property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">__name</span>

    <span class="k">def</span> <span class="nf">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">another_product</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">name</span> <span class="o">&gt;</span> <span class="n">another_product</span><span class="p">.</span><span class="n">name</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Orange</span> <span class="o">=</span> <span class="n">Product</span><span class="p">(</span><span class="s">"Orange"</span><span class="p">,</span> <span class="mf">4.90</span><span class="p">)</span>
<span class="n">Apple</span> <span class="o">=</span> <span class="n">Product</span><span class="p">(</span><span class="s">"Apple"</span><span class="p">,</span> <span class="mf">3.95</span><span class="p">)</span>

<span class="k">if</span> <span class="n">Orange</span> <span class="o">&gt;</span> <span class="n">Apple</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Orange is greater"</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Apple is greater"</span><span class="p">)</span>
</code></pre></div></div>

<sample-output>

Orange is greater

</sample-output>

<h2 id="more-operators">More operators</h2>

<p>Here we have a table containing the standard comparison operators, along with the methods which need to be implemented if we want to make them available for use on our objects:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Operator</th>
      <th style="text-align: center">Traditional meaning</th>
      <th style="text-align: center">Name of method</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">&lt;</code></td>
      <td style="text-align: center">Less than</td>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">__lt__(self, another)</code></td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">&gt;</code></td>
      <td style="text-align: center">Greater than</td>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">__gt__(self, another)</code></td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">==</code></td>
      <td style="text-align: center">Equal to</td>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">__eq__(self, another)</code></td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">!=</code></td>
      <td style="text-align: center">Not equal to</td>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">__ne__(self, another)</code></td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">&lt;=</code></td>
      <td style="text-align: center">Less than or equal to</td>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">__le__(self, another)</code></td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">&gt;=</code></td>
      <td style="text-align: center">Greater than or equal to</td>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">__ge__(self, another)</code></td>
    </tr>
  </tbody>
</table>

<p>You can also implement some other operators, including the following arithmetic operators:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Operator</th>
      <th style="text-align: center">Traditional meaning</th>
      <th style="text-align: center">Name of method</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">+</code></td>
      <td style="text-align: center">Addition</td>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">__add__(self, another)</code></td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">-</code></td>
      <td style="text-align: center">Subtraction</td>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">__sub__(self, another)</code></td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">*</code></td>
      <td style="text-align: center">Multiplication</td>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">__mul__(self, another)</code></td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">/</code></td>
      <td style="text-align: center">Division (floating point result)</td>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">__truediv__(self, another)</code></td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">//</code></td>
      <td style="text-align: center">Division (integer result)</td>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">__floordiv__(self, another)</code></td>
    </tr>
  </tbody>
</table>

<p>More operators and method names are easily found online. Remember also the <code class="language-plaintext highlighter-rouge">dir</code> command for listing the methods available for use on a given object.</p>

<p>It is very rarely necessary to implement all the arithmetic and comparison operators in your own classes. For example, division is an operation which rarely makes sense outside numerical objects. What would be the result of dividing a Student object by three, or by another Student object? Nevertheless, some of these operators are often very useful with also your own classes. The selection of methods to implement depends on what makes sense, knowing the properties of your objects.</p>

<p>Let’s have a look at a class which models a single note. If we implement the <code class="language-plaintext highlighter-rouge">__add__</code> method within our class definition, the addition operator <code class="language-plaintext highlighter-rouge">+</code> becomes available on our Note objects:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="k">class</span> <span class="nc">Note</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entry_date</span><span class="p">:</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">entry</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">entry_date</span> <span class="o">=</span> <span class="n">entry_date</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">entry</span> <span class="o">=</span> <span class="n">entry</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">entry_date</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">entry</span><span class="si">}</span><span class="s">"</span>

    <span class="k">def</span> <span class="nf">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">another</span><span class="p">):</span>
        <span class="c1"># The date of the new note is the current time
</span>        <span class="n">new_note</span> <span class="o">=</span> <span class="n">Note</span><span class="p">(</span><span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">(),</span> <span class="s">""</span><span class="p">)</span>
        <span class="n">new_note</span><span class="p">.</span><span class="n">entry</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">entry</span> <span class="o">+</span> <span class="s">" and "</span> <span class="o">+</span> <span class="n">another</span><span class="p">.</span><span class="n">entry</span>
        <span class="k">return</span> <span class="n">new_note</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">entry1</span> <span class="o">=</span> <span class="n">Note</span><span class="p">(</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">17</span><span class="p">),</span> <span class="s">"Remember to buy presents"</span><span class="p">)</span>
<span class="n">entry2</span> <span class="o">=</span> <span class="n">Note</span><span class="p">(</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">23</span><span class="p">),</span> <span class="s">"Remember to get a tree"</span><span class="p">)</span>

<span class="c1"># These notes can be added together with the + operator
# This calls the  __add__ method in the Note class
</span><span class="n">both</span> <span class="o">=</span> <span class="n">entry1</span> <span class="o">+</span> <span class="n">entry2</span>
<span class="k">print</span><span class="p">(</span><span class="n">both</span><span class="p">)</span>
</code></pre></div></div>

<sample-output>

2020-09-09 14:13:02.163170: Remember to buy presents and Remember to get a tree

</sample-output>

<h2 id="a-string-representation-of-an-object">A string representation of an object</h2>

<p>You have already implemented quite a few <code class="language-plaintext highlighter-rouge">__str__</code> methods in your classes. As you know, the method returns a string representation of the object. Another quite similar method is <code class="language-plaintext highlighter-rouge">__repr__</code> which returns a <em>technical</em> representation of the object. The method <code class="language-plaintext highlighter-rouge">__repr__</code> is often implemented so that it returns the program code which can be executed to return an object with <em>identical contents</em> to the current object.</p>

<p>The function <code class="language-plaintext highlighter-rouge">repr</code> returns this technical string representation of the object. The technical representation is used also whenever the <code class="language-plaintext highlighter-rouge">__str__</code> method has not been defined for the object. The example below will make this clearer:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Person</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">age</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">age</span>
        
    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s">"Person(</span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">name</span><span class="p">)</span><span class="si">}</span><span class="s">, </span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">age</span><span class="si">}</span><span class="s">)"</span>
</code></pre></div></div>

<pre><code class="language-python3">person1 = Person("Anna", 25)
person2 = Person("Peter", 99)
print(person1)
print(person2)
</code></pre>

<sample-output>

Person('Anna', 25)
Person('Peter', 99)

</sample-output>

<p>Notice how the <code class="language-plaintext highlighter-rouge">__repr__</code>  method itself uses the <code class="language-plaintext highlighter-rouge">repr</code> function to retrieve the technical representation of the string. This is necessary to include the <code class="language-plaintext highlighter-rouge">'</code> characters in the result.</p>

<p>The following class has definitions for both <code class="language-plaintext highlighter-rouge">__repr__</code> and <code class="language-plaintext highlighter-rouge">__str__</code>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Person</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">age</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">age</span>
        
    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s">"Person(</span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">name</span><span class="p">)</span><span class="si">}</span><span class="s">, </span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">age</span><span class="si">}</span><span class="s">)"</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s"> (</span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">age</span><span class="si">}</span><span class="s"> years)"</span>
</code></pre></div></div>

<pre><code class="language-python3">Person = Person("Anna", 25)
print(Person)
print(repr(Person))
</code></pre>

<sample-output>

Anna (25 years)
Person('Anna', 25)

</sample-output>

<p>It is worth mentioning that with data structures, such as lists, Python always uses the <code class="language-plaintext highlighter-rouge">__repr__</code> method for the string representation of the contents. This can sometimes look a bit baffling:</p>

<pre><code class="language-python3">persons = []
persons.append(Person("Anna", 25))
persons.append(Person("Peter", 99))
persons.append(Person("Mary", 55))
print(persons)
</code></pre>

<sample-output>

[Person('Anna', 25), Person('Peter', 99), Person('Mary', 55)]

</sample-output>

<programming-exercise name="Money" tmcname="part10-07_money">

The exercise template contains an outline for a class named `Money`. This exercise asks you to implement some additional methods and to fix some small problems in the template.

## Fix the string representation

The `__str__` method in the class definition doesn't work quite right. Given the following two Money objects, the latter is printed out wrong:

```python
e1 = Money(4, 10)
e2 = Money(2, 5)  # two euros and five cents

print(e1)
print(e2)
```

<sample-output>

4.10
2.5

</sample-output>

Please fix the method so that it prints out 

<sample-output>

4.10 eur
2.05 eur

</sample-output>

## Equal amounts

Please define a new method named `__eq__(self, another)` which allows you to use the `==` comparison operator on Money objects. You can test your implementation with the following code:

```python
e1 = Money(4, 10)
e2 = Money(2, 5)
e3 = Money(4, 10)

print(e1)
print(e2)
print(e3)
print(e1 == e2)
print(e1 == e3)
```

<sample-output>

4.10 eur
2.05 eur
4.10 eur
False
True

</sample-output>

## Other comparison operators

Please implement the appropriate methods for the comparison operators `&lt;`, `&gt;` and `!=`.

```python
e1 = Money(4, 10)
e2 = Money(2, 5)

print(e1 != e2)
print(e1 &lt; e2)
print(e1 &gt; e2)
```

<sample-output>

True
False
True

</sample-output>

## Addition and subtraction

Please implement the addition and subtraction operators `+` and `-` for Money objects. Both should return a new object of type Money. Neither the object itself nor the object passed as an argument should be changed as a result.

NB: the value of a Money object cannot be negative. If an attempt to subtract would result in a negative result, the method should raise a `ValueError` exception.

```python
e1 = Money(4, 5)
e2 = Money(2, 95)

e3 = e1 + e2
e4 = e1 - e2

print(e3)
print(e4)

e5 = e2-e1
```

<sample-output>

7.00 eur
1.10 eur
Traceback (most recent call last):
  File "money.py", line 416, in <module>
    e5 = e2-e1
  File "money.py", line 404, in __sub__
    raise ValueError(f"a negative result is not allowed")
ValueError: a negative result is not allowed

&lt;/sample-output&gt;

## The value must not be directly accessible

The class still has a small integrity issue. The user can "cheat" by accessing the attributes directly and changing the value stored in the Money object:

```python
print(e1)
e1.euros = 1000
print(e1)
```

<sample-output>

4.05 eur
1000.05 eur

</sample-output>

Please [encapsulate](/part-9/3-encapsulation#encapsulation) the implementation of the attributes defined in the class so that the cheat used above is not possible. The class should have no public attributes, and no getter or setter methods for the euros or the cents.

&lt;/programming-exercise&gt;

<programming-exercise name="Simple date" tmcname="part10-08_simple_date">

In this exercise you are asked to implement the class `SimpleDate` which allows you to handle dates. For simplicity's sake we assume here that _each month has 30 days_.

Because of this simplification you should not use the `datetime` module from the Python standard library. You will implement similar functionality by yourself instead.

## Comparisons

Please implement the outline of the class, along with methods allowing for comparisons with the operators `&lt;`, `&gt;`, `==` and `!=`. You can use the following code to test your implementation:

```python
d1 = SimpleDate(4, 10, 2020)
d2 = SimpleDate(28, 12, 1985)
d3 = SimpleDate(28, 12, 1985)

print(d1)
print(d2)
print(d1 == d2)
print(d1 != d2)
print(d1 == d3)
print(d1 &lt; d2)
print(d1 &gt; d2)
```

<sample-output>

4.10.2020
28.12.1985
False
True
False
False
True

</sample-output>

## Increment

Please implement the addition operator `+` which allows you to add a given number of days to a SimpleDate object. The operator should return a new SimpleDate object. The original object should not be changed.

```python
d1 = SimpleDate(4, 10, 2020)
d2 = SimpleDate(28, 12, 1985)

d3 = d1 + 3
d4 = d2 + 400

print(d1)
print(d2)
print(d3)
print(d4)
```

<sample-output>

4.10.2020
28.12.1985
7.10.2020
8.2.1987

</sample-output>

## Difference

Please implement the subtraction operator `-` which allows you to find out the difference in days between two SimpleDate objects. As we assumed each month to have 30 days, a year within the confines of this exercise is 12*30 = 360 days long.

You can use the following code to test your program:

```python
d1 = SimpleDate(4, 10, 2020)
d2 = SimpleDate(2, 11, 2020)
d3 = SimpleDate(28, 12, 1985)

print(d2-d1)
print(d1-d2)
print(d1-d3)
```

<sample-output>

28
28
12516

</sample-output>

</programming-exercise>

## Iterators

We know that the `for` statement can be used to _iterate_ through many different data structures, files and collections of items. A typical use case would be the following function:

```python

def count_positives(my_list: list):
    n = 0
    for item in my_list:
        if item &gt; 0:
            n += 1
    return n

```

The function goes through the items in the list one by one, and keeps track of how many of the items were positive.

It is possible to make your own classes iterable, too. This is useful when the core purpose of the class involves storing a collection of items. The Bookshelf class from a previous example would be a good candidate, as it would make sense to use a `for` loop to go through the books on the shelf. The same applies to, say, a student register. Being able to iterate through the collection of students could be useful.

To make a class iterable you must implement the iterator methods `__iter__` and  `__next__`. We will return to the specifics of these methods after the following example:

```python
class Book:
    def __init__(self, name: str, author: str, page_count: int):
        self.name = name
        self.author = author
        self.page_count = page_count

class Bookshelf:
    def __init__(self):
        self._books = []

    def add_book(self, book: Book):
        self._books.append(book)

    # This is the iterator initialization method
    # The iteration variable(s) should be initialized here
    def __iter__(self):
        self.n = 0
        # the method returns a reference to the object itself as 
        # the iterator is implemented within the same class definition
        return self

    # This method returns the next item within the object
    # If all items have been traversed, the StopIteration event is raised
    def __next__(self):
        if self.n &lt; len(self._books):
            # Select the current item from the list within the object
            book = self._books[self.n]
            # increase the counter (i.e. iteration variable) by one
            self.n += 1
            # return the current item
            return book
        else:
            # All books have been traversed
            raise StopIteration
```

The method `__iter__` initializes the iteration variable or variables. In this case it suffices to have a simple counter containing the index of the current item in the list. We also need the method `__next__`, which returns the next item in the iterator. In the example above the method returns the item at index `n` from the list within the Bookshelf object, and the iterator variable is also incremented. 

When all objects have been traversed, the `__next__` method raises the `StopIteration` exception. The process is no different from raising any other exceptions, but this exception is automatically handled by Python and its purpose is to signal to the code calling the iterator (e.g. a `for` loop) that the iteration is now over.

Our Bookshelf is now ready for iteration, for example with a `for` loop:

```python
if __name__ == "__main__":
    b1 = Book("The Life of Python", "Montague Python", 123)
    b2 = Book("The Old Man and the C", "Ernest Hemingjavay", 204)
    b3 = Book("A Good Cup of Java", "Caffee Coder", 997)

    shelf = Bookshelf()
    shelf.add_book(b1)
    shelf.add_book(b2)
    shelf.add_book(b3)

    # Print the names of all the books
    for book in shelf:
        print(book.name)
```

<sample-output>

The Life of Python
The Old Man and the C
A Good Cup of Java

</sample-output>


<programming-exercise name="An iterable shopping list" tmcname="part10-09_iterable_shopping_list">

The exercise template contains the `ShoppingList` class from the [exercise in part 8](/part-8/2-classes-and-objects#programming-exercise-shopping-list). Please adjust the class so that it is iterable and can thus be used as follows:

```python
shopping_list = ShoppingList()
shopping_list.add("bananas", 10)
shopping_list.add("apples", 5)
shopping_list.add("pineapple", 1)

for product in shopping_list:
    print(f"{product[0]}: {product[1]} units")
```

<sample-output>

bananas: 10 units
apples: 5 units
pineapple: 1 units

</sample-output>

The `__next__` method of your iterator should return tuples, where the first item is the name of the product and the second item is the amount.

</programming-exercise>
</module></sample-output></programming-exercise>


      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
