<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Animation | programming-25</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Animation" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="https://gapps123.github.io/programming-25/programming-25/data/part-13/2-animation.html" />
<meta property="og:url" content="https://gapps123.github.io/programming-25/programming-25/data/part-13/2-animation.html" />
<meta property="og:site_name" content="programming-25" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Animation" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","headline":"Animation","url":"https://gapps123.github.io/programming-25/programming-25/data/part-13/2-animation.html"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/programming-25/assets/css/style.css?v=8fdccb165fdb68b261d29b53eab9f8c397ee01cf">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/programming-25/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="https://gapps123.github.io/programming-25/programming-25/">programming-25</a></h1>
      

      <text-box variant="learningObjectives" name="Learning objectives">

After this section

- You will know how to create an animation with pygame
- You will be able to use a clock to set the speed of your program
- You will be able to use basic trigonometric functions in your animations

</text-box>

<p>Many games have moving characters, so a logical next step is creating animations. We can create the illusion of movement by drawing the same image in different locations on the screen and timing the changes appropriately.</p>

<h2 id="creating-an-animation">Creating an animation</h2>

<p>The following code creates an animation where a robot moves from left to right in a pygame window:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">pygame</span>

<span class="n">pygame</span><span class="p">.</span><span class="n">init</span><span class="p">()</span>
<span class="n">window</span> <span class="o">=</span> <span class="n">pygame</span><span class="p">.</span><span class="n">display</span><span class="p">.</span><span class="n">set_mode</span><span class="p">((</span><span class="mi">640</span><span class="p">,</span> <span class="mi">480</span><span class="p">))</span>

<span class="n">robot</span> <span class="o">=</span> <span class="n">pygame</span><span class="p">.</span><span class="n">image</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="s">"robot.png"</span><span class="p">)</span>

<span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">clock</span> <span class="o">=</span> <span class="n">pygame</span><span class="p">.</span><span class="n">time</span><span class="p">.</span><span class="n">Clock</span><span class="p">()</span>

<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">pygame</span><span class="p">.</span><span class="n">event</span><span class="p">.</span><span class="n">get</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">event</span><span class="p">.</span><span class="nb">type</span> <span class="o">==</span> <span class="n">pygame</span><span class="p">.</span><span class="n">QUIT</span><span class="p">:</span>
            <span class="nb">exit</span><span class="p">()</span>

    <span class="n">window</span><span class="p">.</span><span class="n">fill</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="n">window</span><span class="p">.</span><span class="n">blit</span><span class="p">(</span><span class="n">robot</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
    <span class="n">pygame</span><span class="p">.</span><span class="n">display</span><span class="p">.</span><span class="n">flip</span><span class="p">()</span>

    <span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">clock</span><span class="p">.</span><span class="n">tick</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span>
</code></pre></div></div>

<p>When this is executed, the result should look like this:</p>

<p><img src="pygame_animation.gif" /></p>

<p>Let’s take a closer look at the commands involved. If we want to trace the movement of the image on the screen, we need to know its location, which is why we have two variables for the coordinates of the top left corner of the image:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
</code></pre></div></div>

<p>We also have a clock, which we use to make sure the speed of the animation is just right:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">clock</span> <span class="o">=</span> <span class="n">pygame</span><span class="p">.</span><span class="n">time</span><span class="p">.</span><span class="n">Clock</span><span class="p">()</span>
</code></pre></div></div>

<p>The main loop draws the image at its current location with each iteration:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">window</span><span class="p">.</span><span class="n">fill</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="n">window</span><span class="p">.</span><span class="n">blit</span><span class="p">(</span><span class="n">robot</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
    <span class="n">pygame</span><span class="p">.</span><span class="n">display</span><span class="p">.</span><span class="n">flip</span><span class="p">()</span>
</code></pre></div></div>

<p>First the method <code class="language-plaintext highlighter-rouge">fill</code> fills the window with black, as before. The colour is passed as a tuple containing the RGB values for the colour. In this case the argument is <code class="language-plaintext highlighter-rouge">(0, 0, 0)</code>, which means that all three components - red, green and blue - have value 0. Each component can have a value between 0 and 255. So, if we passed <code class="language-plaintext highlighter-rouge">(255, 255, 255)</code> as the argument, we’d get a white window, and with <code class="language-plaintext highlighter-rouge">(255, 0, 0)</code> we’d get a red window. RGB colour codes form the backbone of digital colouring, and there are many tools online for working with them, for example <a href="https://www.rapidtables.com/web/color/RGB_Color.html">RGB Color Codes Chart</a>.</p>

<p>After the window is filled with colour the image is drawn at the given location with the <code class="language-plaintext highlighter-rouge">blit</code> method. Then the contents of the window are updated with the function <code class="language-plaintext highlighter-rouge">pygame.display.flip</code>.</p>

<p>Finally, the value stored in <code class="language-plaintext highlighter-rouge">x</code> is incremented, which makes the image move one pixel to the right with each iteration:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>
</code></pre></div></div>

<p>The clock method <code class="language-plaintext highlighter-rouge">tick</code> is called at the end:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">clock</span><span class="p">.</span><span class="n">tick</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span>
</code></pre></div></div>

<p>The method <code class="language-plaintext highlighter-rouge">tick</code> takes care of the speed of the animation. The argument <code class="language-plaintext highlighter-rouge">60</code> dictates that the loop should be executed 60 times a second, which means that the image moves 60 pixels to the right each second. This approximately matches the <em>FPS</em> or <em>frames per second</em> value used with games.</p>

<p>In principle, the <code class="language-plaintext highlighter-rouge">tick</code> method makes sure that the animation runs at the same speed on every computer. If there was no such timing involved, the speed of the animation would depend on the speed of the computer.</p>

<h2 id="bouncing-off-a-wall">Bouncing off a wall</h2>

<p>The previous animation was otherwise excellent, but as the robot reached a wall, it just kept going out of sight. Let’s make the robot bounce off the wall.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">pygame</span>

<span class="n">pygame</span><span class="p">.</span><span class="n">init</span><span class="p">()</span>
<span class="n">window</span> <span class="o">=</span> <span class="n">pygame</span><span class="p">.</span><span class="n">display</span><span class="p">.</span><span class="n">set_mode</span><span class="p">((</span><span class="mi">640</span><span class="p">,</span> <span class="mi">480</span><span class="p">))</span>

<span class="n">robot</span> <span class="o">=</span> <span class="n">pygame</span><span class="p">.</span><span class="n">image</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="s">"robot.png"</span><span class="p">)</span>

<span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">velocity</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">clock</span> <span class="o">=</span> <span class="n">pygame</span><span class="p">.</span><span class="n">time</span><span class="p">.</span><span class="n">Clock</span><span class="p">()</span>

<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">pygame</span><span class="p">.</span><span class="n">event</span><span class="p">.</span><span class="n">get</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">event</span><span class="p">.</span><span class="nb">type</span> <span class="o">==</span> <span class="n">pygame</span><span class="p">.</span><span class="n">QUIT</span><span class="p">:</span>
            <span class="nb">exit</span><span class="p">()</span>

    <span class="n">window</span><span class="p">.</span><span class="n">fill</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="n">window</span><span class="p">.</span><span class="n">blit</span><span class="p">(</span><span class="n">robot</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
    <span class="n">pygame</span><span class="p">.</span><span class="n">display</span><span class="p">.</span><span class="n">flip</span><span class="p">()</span>
    
    <span class="n">x</span> <span class="o">+=</span> <span class="n">velocity</span>
    <span class="k">if</span> <span class="n">velocity</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">x</span><span class="o">+</span><span class="n">robot</span><span class="p">.</span><span class="n">get_width</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="mi">640</span><span class="p">:</span>
        <span class="n">velocity</span> <span class="o">=</span> <span class="o">-</span><span class="n">velocity</span>
    <span class="k">if</span> <span class="n">velocity</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">velocity</span> <span class="o">=</span> <span class="o">-</span><span class="n">velocity</span>

    <span class="n">clock</span><span class="p">.</span><span class="n">tick</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span>
</code></pre></div></div>

<p>Running the above code should look like this:</p>

<p><img src="pygame_animation2.gif" /></p>

<p>There is a new variable <code class="language-plaintext highlighter-rouge">velocity</code> which determines the direction of the movement. If the value is above zero, movement is to the right, and if it is below zero, movement is to the left. More precisely in this case, if the value is <code class="language-plaintext highlighter-rouge">1</code>, the robot moves to the right, and if it is <code class="language-plaintext highlighter-rouge">-1</code>, the robot moves to the left.</p>

<p>The following lines make the robot bounce off the side walls:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">if</span> <span class="n">velocity</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">x</span><span class="o">+</span><span class="n">robot</span><span class="p">.</span><span class="n">get_width</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="mi">640</span><span class="p">:</span>
        <span class="n">velocity</span> <span class="o">=</span> <span class="o">-</span><span class="n">velocity</span>
    <span class="k">if</span> <span class="n">velocity</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">velocity</span> <span class="o">=</span> <span class="o">-</span><span class="n">velocity</span>
</code></pre></div></div>

<p>If the velocity is above zero so that the robot is moving to the right, and the right edge if the image goes beyond the right edge of the window, the direction is reversed and the robot starts moving to the left. Similarly, if the velocity is below zero so that the robot is moving to the left, and the left edge of the image reaches the left edge of the window, the direction is again reversed and the robot starts moving to the right again.</p>

<p>This makes the robot move on a path from the left edge of the window to the right edge, and back to the left, and then to the right again, repeated ad infinitum.</p>

<h2 id="rotation">Rotation</h2>

<p>Let’s create one more animation. This time the robot should <em>rotate</em> in a circle around the centre of the window:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">pygame</span>
<span class="kn">import</span> <span class="nn">math</span>

<span class="n">pygame</span><span class="p">.</span><span class="n">init</span><span class="p">()</span>
<span class="n">window</span> <span class="o">=</span> <span class="n">pygame</span><span class="p">.</span><span class="n">display</span><span class="p">.</span><span class="n">set_mode</span><span class="p">((</span><span class="mi">640</span><span class="p">,</span> <span class="mi">480</span><span class="p">))</span>

<span class="n">robot</span> <span class="o">=</span> <span class="n">pygame</span><span class="p">.</span><span class="n">image</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="s">"robot.png"</span><span class="p">)</span>

<span class="n">angle</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">clock</span> <span class="o">=</span> <span class="n">pygame</span><span class="p">.</span><span class="n">time</span><span class="p">.</span><span class="n">Clock</span><span class="p">()</span>

<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">pygame</span><span class="p">.</span><span class="n">event</span><span class="p">.</span><span class="n">get</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">event</span><span class="p">.</span><span class="nb">type</span> <span class="o">==</span> <span class="n">pygame</span><span class="p">.</span><span class="n">QUIT</span><span class="p">:</span>
            <span class="nb">exit</span><span class="p">()</span>

    <span class="n">x</span> <span class="o">=</span> <span class="mi">320</span><span class="o">+</span><span class="n">math</span><span class="p">.</span><span class="n">cos</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="o">-</span><span class="n">robot</span><span class="p">.</span><span class="n">get_width</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mi">240</span><span class="o">+</span><span class="n">math</span><span class="p">.</span><span class="n">sin</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="o">-</span><span class="n">robot</span><span class="p">.</span><span class="n">get_height</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span>

    <span class="n">window</span><span class="p">.</span><span class="n">fill</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="n">window</span><span class="p">.</span><span class="n">blit</span><span class="p">(</span><span class="n">robot</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
    <span class="n">pygame</span><span class="p">.</span><span class="n">display</span><span class="p">.</span><span class="n">flip</span><span class="p">()</span>

    <span class="n">angle</span> <span class="o">+=</span> <span class="mf">0.01</span>
    <span class="n">clock</span><span class="p">.</span><span class="n">tick</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span>
</code></pre></div></div>

<p>Running the above code should look like this:</p>

<p><img src="pygame_rotation.gif" /></p>

<p>Rotation in a relatively precise circle is achieved with the help of some basic trigonometric functions. The varible <code class="language-plaintext highlighter-rouge">angle</code> contains the angle of the robots location in relation to the centre of the window and the horizontal line running through it. The sine and cosine functions from the Python math library are used to calculate the coordinates of the robot’s location:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="n">x</span> <span class="o">=</span> <span class="mi">320</span><span class="o">+</span><span class="n">math</span><span class="p">.</span><span class="n">cos</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="o">-</span><span class="n">robot</span><span class="p">.</span><span class="n">get_width</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span>
        <span class="n">y</span> <span class="o">=</span> <span class="mi">240</span><span class="o">+</span><span class="n">math</span><span class="p">.</span><span class="n">sin</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="o">-</span><span class="n">robot</span><span class="p">.</span><span class="n">get_height</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span>
</code></pre></div></div>

<p>The robot rotates around a circle of radius 100 around the centre of the window. The hypotenuse in this scenario is the radius of the circle. The cosine function gives the length of the <em>adjacent</em> side of a right triangle in relation to the hypotenuse, which means that it gives us the <code class="language-plaintext highlighter-rouge">x</code> coordinate of the location. The sine function gives the length of the <em>opposite</em> side, i.e. the <code class="language-plaintext highlighter-rouge">y</code> coordinate. The location is then adjusted for the size of the image, so that the centre of the circle is at the centre of the window.</p>

<p>With each iteration the size of the <code class="language-plaintext highlighter-rouge">angle</code> is incremented by 0.01:llä. As we are using radians, a full circle is 2π, which equals about 6.28. It takes about 628 iterations for the robot to go a full circle, and at 60 iterations per second this takes just over 10 seconds.</p>

<programming-exercise name="Vertical movement" tmcname="part13-05_vertical_movement">

Please create an animation where the robot moves up and down in an endless loop. The end result should look like this:

<img src="pygame_vertical.gif" />

</programming-exercise>

<programming-exercise name="Round the perimeter" tmcname="part13-06_round_the_perimeter">

Please create an animation where the robot traces the perimeter of the window. The end result should look like this:

<img src="pygame_perimeter.gif" />

</programming-exercise>

<programming-exercise name="Two robots" tmcname="part13-07_two_robots">

Please create an animation where two robots move back and forth to the left and right. The lower robot should move at double the speed of the upper one. The end result should look like this:

<img src="pygame_move2.gif" />

</programming-exercise>

<programming-exercise name="Robots in a circle" tmcname="part13-08_robot_circle">

Please create an animation where ten robots go round in a circle. The end result should look like this:

<img src="pygame_circle.gif" />

</programming-exercise>

<programming-exercise name="Bouncing ball" tmcname="part13-09_bouncing_ball">

Please create an animation where a ball bounces from the edges of the window. The end result should look like this:

<img src="pygame_bounce.gif" />

The exercise template contains the image `ball.png`.

</programming-exercise>

<programming-exercise name="Robot invasion" tmcname="part13-10_robot_invasion">

Please create an animation where robots fall from the sky randomly. When a robot reaches the ground, it starts moving to the left or to the right, and finaly disappears off the screen. The end result should look like this:

<img src="pygame_invasion.gif" />

</programming-exercise>


      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
